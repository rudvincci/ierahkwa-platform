# Configuration Reference

MameyForge is configured via `mameyforge.toml` at the project root. This file is generated by `mameyforge init` and can be edited freely.

## Full Example

```toml
[project]
name = "my-project"
version = "0.1.0"
authors = ["Alice <alice@example.com>"]

[contracts]
path = "contracts"
output = "artifacts"

[build]
optimization_level = "z"
strip = true
lto = true

[networks.devnet]
url = "http://localhost:50051"
chain_id = "mamey-general-devnet"
gas_limit = 10000000

[networks.testnet]
url = "https://testnet.mamey.io:50051"
chain_id = "mamey-general-testnet"
gas_limit = 10000000

[networks.mainnet]
url = "https://mainnet.mamey.io:50051"
chain_id = "mamey-general"
gas_limit = 10000000

[devnet]
port = 50051
data_dir = ".mameyforge/devnet"
auto_mine = true
block_time = 1
docker_image = "mamey/general-node:latest"
```

---

## Sections

### `[project]`

| Key | Type | Required | Default | Description |
|-----|------|----------|---------|-------------|
| `name` | string | ✅ | — | Project name (used for WASM file naming) |
| `version` | string | ✅ | `"0.1.0"` | SemVer version |
| `authors` | string[] | ❌ | `[]` | Author list |

### `[contracts]`

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| `path` | string | `"contracts"` | Directory containing contract source |
| `output` | string | `"artifacts"` | Directory for compiled WASM output |

### `[build]`

Controls Rust/WASM compilation options.

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| `optimization_level` | string | `"z"` | WASM optimisation: `"s"` (size), `"z"` (aggressive size), `"3"` (speed) |
| `strip` | bool | `true` | Strip debug symbols from WASM |
| `lto` | bool | `true` | Enable link-time optimisation |

**Recommendations:**
- Use `"z"` for deployment (smallest binary)
- Use `"3"` during development if you need faster execution
- Always strip and LTO for production

### `[networks.<name>]`

Define named network endpoints. Any number of networks can be configured.

| Key | Type | Required | Default | Description |
|-----|------|----------|---------|-------------|
| `url` | string | ✅ | — | gRPC endpoint URL |
| `chain_id` | string | ✅ | — | Chain identifier |
| `gas_price` | u64 | ❌ | `null` | Gas price override |
| `gas_limit` | u64 | ❌ | `null` | Gas limit |

**Default networks** (auto-generated by `init`):

```toml
[networks.devnet]
url = "http://localhost:50051"
chain_id = "mamey-general-devnet"

[networks.testnet]
url = "https://testnet.mamey.io:50051"
chain_id = "mamey-general-testnet"

[networks.mainnet]
url = "https://mainnet.mamey.io:50051"
chain_id = "mamey-general"
```

**Custom networks:**

```toml
[networks.staging]
url = "https://staging.mamey.io:50051"
chain_id = "mamey-general-staging"
gas_limit = 20000000
```

### `[devnet]`

Local devnet (Docker container) settings.

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| `port` | u16 | `50051` | gRPC port to expose |
| `data_dir` | string | `".mameyforge/devnet"` | Persistent data directory |
| `auto_mine` | bool | `true` | Automatically produce blocks |
| `block_time` | u64 | `1` | Seconds between blocks (when auto_mine is true) |
| `docker_image` | string | `"mamey/general-node:latest"` | Docker image for devnet |

---

## Environment Variables

Some settings can be overridden via environment:

| Variable | Overrides | Example |
|----------|-----------|---------|
| `MAMEYFORGE_NETWORK` | Default `--network` flag | `testnet` |
| `MAMEYFORGE_CONFIG` | Config file path | `./custom.toml` |

---

## Tips

- Keep `mameyforge.toml` in version control
- Use `.env` for secrets (private keys, API keys) — add it to `.gitignore`
- The `[devnet]` section is ignored on CI — set up network configs for your CI environment
- Gas settings are optional; the node will estimate if not provided
