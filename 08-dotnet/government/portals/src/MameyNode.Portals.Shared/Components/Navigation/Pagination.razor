@namespace MameyNode.Portals.Shared.Components.Navigation

<MudStack Row="true" Justify="Justify.SpaceBetween" AlignItems="AlignItems.Center" Class="@Class">
    <MudText Typo="Typo.body2" Color="Color.Secondary">
        Showing @((CurrentPage - 1) * PageSize + 1) to @(Math.Min(CurrentPage * PageSize, TotalItems)) of @TotalItems
    </MudText>
    <MudPagination 
        Count="@TotalPages" 
        Selected="@CurrentPage"
        SelectedChanged="@OnPageChanged"
        Color="@Color"
        Variant="@Variant" />
</MudStack>

@code {
    [Parameter] public int CurrentPage { get; set; } = 1;
    [Parameter] public int PageSize { get; set; } = 10;
    [Parameter] public int TotalItems { get; set; } = 0;
    [Parameter] public EventCallback<int> PageChanged { get; set; }
    [Parameter] public Color Color { get; set; } = Color.Primary;
    [Parameter] public Variant Variant { get; set; } = Variant.Text;
    [Parameter] public string? Class { get; set; }

    private int TotalPages => (int)Math.Ceiling((double)TotalItems / PageSize);

    private async Task OnPageChanged(int page)
    {
        CurrentPage = page;
        if (PageChanged.HasDelegate)
        {
            await PageChanged.InvokeAsync(page);
        }
    }
}
