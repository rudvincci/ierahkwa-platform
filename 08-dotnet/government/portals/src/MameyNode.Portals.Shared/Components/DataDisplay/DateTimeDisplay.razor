@namespace MameyNode.Portals.Shared.Components.DataDisplay

<MudText Typo="@Typo" Color="@Color">
    @GetDisplayText()
</MudText>

@code {
    [Parameter] public DateTime DateTime { get; set; } = DateTime.UtcNow;
    [Parameter] public bool ShowRelativeTime { get; set; } = true;
    [Parameter] public Typo Typo { get; set; } = Typo.body2;
    [Parameter] public Color Color { get; set; } = Color.Secondary;
    [Parameter] public string Format { get; set; } = "MMM dd, yyyy HH:mm";

    private string GetDisplayText()
    {
        if (ShowRelativeTime)
        {
            var timeSpan = DateTime.UtcNow - DateTime;
            if (timeSpan.TotalSeconds < 60)
                return "Just now";
            if (timeSpan.TotalMinutes < 60)
                return $"{(int)timeSpan.TotalMinutes} minute{(timeSpan.TotalMinutes >= 2 ? "s" : "")} ago";
            if (timeSpan.TotalHours < 24)
                return $"{(int)timeSpan.TotalHours} hour{(timeSpan.TotalHours >= 2 ? "s" : "")} ago";
            if (timeSpan.TotalDays < 7)
                return $"{(int)timeSpan.TotalDays} day{(timeSpan.TotalDays >= 2 ? "s" : "")} ago";
        }
        return DateTime.ToString(Format);
    }
}


