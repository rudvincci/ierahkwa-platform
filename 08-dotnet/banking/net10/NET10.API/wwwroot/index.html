<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ierahkwa NET10 DeFi | Sovereign DeFi Exchange</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        :root {
            --gold: #FFD700;
            --gold-dark: #B8860B;
            --neon-green: #00FF41;
            --neon-cyan: #00FFFF;
            --neon-magenta: #FF00FF;
            --neon-purple: #9D4EDD;
            --neon-red: #FF1744;
            --neon-orange: #FF6B35;
            --bg-dark: #0a0e17;
            --bg-card: #111827;
            --bg-hover: #1f2937;
            --border: #2d3748;
            --success: #10B981;
            --warning: #F59E0B;
            --danger: #EF4444;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Rajdhani', sans-serif;
            background: var(--bg-dark);
            color: #fff;
            min-height: 100vh;
        }
        
        /* Header */
        .header {
            background: linear-gradient(135deg, #1a1f2e 0%, #0d1117 100%);
            border-bottom: 2px solid var(--gold);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
        }
        
        .logo { display: flex; align-items: center; gap: 15px; }
        
        .logo-icon {
            width: 50px; height: 50px;
            background: linear-gradient(135deg, var(--neon-green), var(--neon-cyan));
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 24px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 20px var(--neon-green); }
            50% { box-shadow: 0 0 40px var(--neon-cyan); }
        }
        
        .logo-text h1 { font-family: 'Orbitron', sans-serif; font-size: 1.5em; color: var(--gold); }
        .logo-text p { font-size: 0.8em; color: var(--neon-cyan); }
        
        .nav { display: flex; gap: 25px; flex-wrap: wrap; }
        .nav a {
            color: #ccc; text-decoration: none; font-weight: 500;
            transition: color 0.3s; font-size: 1.05em; padding: 8px 16px;
            border-radius: 8px;
        }
        .nav a:hover, .nav a.active {
            color: var(--gold); background: rgba(255, 215, 0, 0.1);
        }
        
        .header-stats { display: flex; gap: 20px; align-items: center; }
        .stat-badge {
            background: var(--bg-card); padding: 8px 16px; border-radius: 10px;
            border: 1px solid var(--border); text-align: center;
        }
        .stat-badge .value { font-family: 'Orbitron', sans-serif; color: var(--neon-green); font-size: 1.1em; }
        .stat-badge .label { font-size: 0.75em; color: #888; }
        
        .btn {
            padding: 10px 25px; border: none; border-radius: 8px;
            cursor: pointer; font-weight: 700; font-family: 'Rajdhani', sans-serif;
            font-size: 1em; transition: all 0.3s;
        }
        .btn-primary { background: linear-gradient(135deg, var(--gold), var(--gold-dark)); color: #000; }
        .btn-primary:hover { box-shadow: 0 0 20px var(--gold); transform: translateY(-2px); }
        .btn-outline { background: transparent; border: 2px solid var(--neon-cyan); color: var(--neon-cyan); }
        .btn-outline:hover { background: var(--neon-cyan); color: #000; }
        .btn-green { background: linear-gradient(135deg, var(--neon-green), #00cc33); color: #000; }
        .btn-green:hover { box-shadow: 0 0 20px var(--neon-green); }
        .btn-red { background: linear-gradient(135deg, var(--neon-red), #cc0022); color: #fff; }
        .btn-purple { background: linear-gradient(135deg, var(--neon-purple), #6b21a8); color: #fff; }
        
        /* Main Layout */
        .main { padding: 20px 30px; max-width: 1600px; margin: 0 auto; }
        .deck { display: none; }
        .deck.active { display: block; }
        
        .card {
            background: var(--bg-card); border-radius: 16px;
            border: 1px solid var(--border); overflow: hidden;
            transition: all 0.3s;
        }
        .card:hover { border-color: rgba(255, 215, 0, 0.3); }
        .card-header {
            padding: 16px 20px; border-bottom: 1px solid var(--border);
            display: flex; justify-content: space-between; align-items: center;
        }
        .card-title { font-family: 'Orbitron', sans-serif; font-size: 1.1em; color: var(--gold); }
        .card-body { padding: 20px; }
        
        /* Swap Interface */
        .swap-container { max-width: 480px; margin: 0 auto; }
        .swap-box {
            background: var(--bg-hover); border-radius: 16px; padding: 20px;
            margin-bottom: 10px; border: 1px solid var(--border);
        }
        .swap-label { display: flex; justify-content: space-between; margin-bottom: 10px; color: #888; font-size: 0.9em; }
        .swap-input-row { display: flex; gap: 10px; align-items: center; }
        .swap-input {
            flex: 1; background: transparent; border: none; color: #fff;
            font-size: 1.8em; font-family: 'Orbitron', sans-serif; outline: none;
        }
        .swap-input::placeholder { color: #444; }
        .token-select {
            display: flex; align-items: center; gap: 8px;
            padding: 10px 16px; background: var(--bg-card); border-radius: 12px;
            cursor: pointer; border: 1px solid var(--border); min-width: 130px;
        }
        .token-select:hover { border-color: var(--gold); }
        .token-icon { width: 28px; height: 28px; border-radius: 50%; background: var(--gold); }
        .token-symbol { font-weight: 700; }
        
        .swap-switch {
            display: flex; justify-content: center; margin: -15px 0;
            position: relative; z-index: 10;
        }
        .swap-switch button {
            width: 45px; height: 45px; border-radius: 50%;
            background: var(--bg-card); border: 2px solid var(--border);
            color: var(--neon-cyan); font-size: 1.3em; cursor: pointer;
            transition: all 0.3s;
        }
        .swap-switch button:hover { border-color: var(--neon-cyan); transform: rotate(180deg); }
        
        .swap-details {
            background: var(--bg-hover); border-radius: 12px; padding: 16px;
            margin: 16px 0; font-size: 0.9em;
        }
        .swap-detail-row { display: flex; justify-content: space-between; margin-bottom: 8px; }
        .swap-detail-row:last-child { margin-bottom: 0; }
        .swap-detail-row .label { color: #888; }
        .swap-detail-row .value { color: var(--neon-cyan); }
        
        /* Pool List */
        .pool-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 20px; }
        .pool-card {
            background: var(--bg-card); border-radius: 16px; padding: 20px;
            border: 1px solid var(--border); transition: all 0.3s;
        }
        .pool-card:hover { border-color: var(--gold); transform: translateY(-5px); box-shadow: 0 10px 30px rgba(255, 215, 0, 0.1); }
        .pool-header { display: flex; align-items: center; gap: 15px; margin-bottom: 20px; }
        .pool-icons { display: flex; }
        .pool-icon {
            width: 40px; height: 40px; border-radius: 50%;
            background: linear-gradient(135deg, var(--gold), var(--neon-green));
            border: 2px solid var(--bg-card); display: flex; align-items: center;
            justify-content: center; font-weight: 700; font-size: 0.8em;
        }
        .pool-icon:last-child { margin-left: -12px; }
        .pool-name { font-family: 'Orbitron', sans-serif; font-size: 1.2em; }
        .pool-fee { font-size: 0.85em; color: #888; }
        .pool-stats { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 20px; }
        .pool-stat { text-align: center; padding: 12px; background: var(--bg-hover); border-radius: 10px; }
        .pool-stat .value { font-family: 'Orbitron', sans-serif; font-size: 1.1em; color: var(--neon-green); }
        .pool-stat .label { font-size: 0.75em; color: #888; }
        .pool-actions { display: flex; gap: 10px; }
        .pool-actions .btn { flex: 1; }
        
        /* Farm List */
        .farm-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(380px, 1fr)); gap: 20px; }
        .farm-card {
            background: var(--bg-card); border-radius: 16px; overflow: hidden;
            border: 1px solid var(--border); transition: all 0.3s;
        }
        .farm-card.featured { border-color: var(--gold); }
        .farm-card:hover { transform: translateY(-5px); box-shadow: 0 10px 30px rgba(0, 255, 65, 0.1); }
        .farm-banner {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(0, 255, 65, 0.2));
            padding: 20px; display: flex; justify-content: space-between; align-items: center;
        }
        .farm-title { font-family: 'Orbitron', sans-serif; font-size: 1.2em; margin-bottom: 5px; }
        .farm-subtitle { color: #888; font-size: 0.9em; }
        .farm-apr {
            font-family: 'Orbitron', sans-serif; font-size: 1.8em;
            color: var(--neon-green); text-shadow: 0 0 20px var(--neon-green);
        }
        .farm-apr span { font-size: 0.5em; color: #888; }
        .farm-body { padding: 20px; }
        .farm-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 20px; }
        .farm-stat { text-align: center; padding: 10px; background: var(--bg-hover); border-radius: 8px; }
        .farm-stat .value { font-family: 'Orbitron', sans-serif; color: var(--neon-cyan); }
        .farm-stat .label { font-size: 0.7em; color: #888; }
        .multiplier-badge {
            position: absolute; top: 15px; right: 15px;
            background: var(--gold); color: #000; padding: 4px 12px;
            border-radius: 20px; font-weight: 700; font-size: 0.85em;
        }
        
        /* Admin Dashboard */
        .admin-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .admin-stat {
            background: var(--bg-card); border-radius: 16px; padding: 24px; text-align: center;
            border: 1px solid var(--border);
        }
        .admin-stat .icon { font-size: 2.5em; margin-bottom: 10px; }
        .admin-stat .value { font-family: 'Orbitron', sans-serif; font-size: 1.8em; margin-bottom: 5px; }
        .admin-stat .label { color: #888; font-size: 0.9em; }
        
        /* Tables */
        .table-container { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 14px 16px; text-align: left; border-bottom: 1px solid var(--border); }
        th { color: #888; font-weight: 600; font-size: 0.85em; text-transform: uppercase; }
        tr:hover td { background: rgba(255, 215, 0, 0.05); }
        .positive { color: var(--neon-green); }
        .negative { color: var(--neon-red); }
        
        /* Forms */
        .form-group { margin-bottom: 20px; }
        .form-label { display: block; margin-bottom: 8px; color: #888; font-size: 0.9em; }
        .form-input {
            width: 100%; padding: 14px 16px; background: var(--bg-hover);
            border: 1px solid var(--border); border-radius: 10px; color: #fff;
            font-size: 1em; font-family: 'Rajdhani', sans-serif;
        }
        .form-input:focus { outline: none; border-color: var(--gold); }
        .form-select {
            width: 100%; padding: 14px 16px; background: var(--bg-hover);
            border: 1px solid var(--border); border-radius: 10px; color: #fff;
            font-size: 1em; cursor: pointer;
        }
        
        /* Modal */
        .modal-overlay {
            display: none; position: fixed; inset: 0; background: rgba(0, 0, 0, 0.8);
            z-index: 1000; align-items: center; justify-content: center;
        }
        .modal-overlay.open { display: flex; }
        .modal {
            background: var(--bg-card); border: 1px solid var(--border); border-radius: 20px;
            padding: 30px; min-width: 400px; max-width: 90vw; max-height: 90vh; overflow-y: auto;
        }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; }
        .modal-title { font-family: 'Orbitron', sans-serif; color: var(--gold); font-size: 1.3em; }
        .modal-close { background: none; border: none; color: #888; font-size: 1.5em; cursor: pointer; }
        
        /* Tabs */
        .tabs { display: flex; gap: 10px; margin-bottom: 20px; }
        .tab-btn {
            padding: 10px 20px; background: var(--bg-hover); border: 1px solid var(--border);
            border-radius: 10px; color: #888; cursor: pointer; font-weight: 600;
            transition: all 0.3s;
        }
        .tab-btn:hover { border-color: var(--gold); color: var(--gold); }
        .tab-btn.active { background: var(--gold); color: #000; border-color: var(--gold); }
        
        /* Node Status */
        .node-status {
            position: fixed; bottom: 20px; right: 20px;
            background: var(--bg-card); border: 1px solid var(--neon-green);
            border-radius: 12px; padding: 15px; display: flex; align-items: center; gap: 12px;
        }
        .node-dot {
            width: 12px; height: 12px; background: var(--neon-green); border-radius: 50%;
            animation: blink 2s infinite;
        }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }
        .node-info .name { color: var(--gold); font-weight: 700; font-size: 0.9em; }
        .node-info .chain { color: #888; font-size: 0.8em; }
        
        /* Slippage Settings */
        .slippage-options { display: flex; gap: 8px; margin-bottom: 10px; }
        .slippage-btn {
            padding: 8px 16px; background: var(--bg-hover); border: 1px solid var(--border);
            border-radius: 8px; color: #888; cursor: pointer; font-size: 0.9em;
        }
        .slippage-btn:hover, .slippage-btn.active { border-color: var(--gold); color: var(--gold); }
        
        /* Responsive */
        @media (max-width: 1024px) {
            .header { flex-wrap: wrap; gap: 15px; }
            .header-stats { display: none; }
            .pool-grid, .farm-grid { grid-template-columns: 1fr; }
        }
        
        @media (max-width: 768px) {
            .nav { gap: 10px; }
            .nav a { padding: 6px 12px; font-size: 0.95em; }
            .main { padding: 15px; }
            .admin-grid { grid-template-columns: repeat(2, 1fr); }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="logo">
            <div class="logo-icon">üåê</div>
            <div class="logo-text">
                <h1>IERAHKWA NET10</h1>
                <p>SOVEREIGN DEFI EXCHANGE</p>
            </div>
        </div>
        
        <nav class="nav">
            <a href="#swap" class="nav-link active" data-view="swap"><i class="bi bi-arrow-left-right"></i> Swap</a>
            <a href="#pools" class="nav-link" data-view="pools"><i class="bi bi-droplet"></i> Pools</a>
            <a href="#farms" class="nav-link" data-view="farms"><i class="bi bi-flower1"></i> Farms</a>
            <a href="#tokens" class="nav-link" data-view="tokens"><i class="bi bi-coin"></i> Tokens</a>
            <a href="/contributions.html" class="nav-link"><i class="bi bi-graph-up"></i> Activity</a>
            <a href="#admin" class="nav-link" data-view="admin"><i class="bi bi-gear"></i> Admin</a>
        </nav>
        
        <div class="header-stats">
            <div class="stat-badge">
                <div class="value" id="tvlDisplay">$33.5M</div>
                <div class="label">TVL</div>
            </div>
            <div class="stat-badge">
                <div class="value" id="volume24Display">$7.5M</div>
                <div class="label">24h Volume</div>
            </div>
            <button class="btn btn-outline" id="btnConnect">Connect Wallet</button>
        </div>
    </header>
    
    <main class="main">
        <!-- ========== SWAP DECK ========== -->
        <div class="deck active" id="deck-swap">
            <div class="swap-container">
                <div class="card">
                    <div class="card-header">
                        <span class="card-title">Swap</span>
                        <button class="btn btn-outline" style="padding: 6px 12px; font-size: 0.85em;" onclick="openSettingsModal()">
                            <i class="bi bi-gear"></i> Settings
                        </button>
                    </div>
                    <div class="card-body">
                        <div class="swap-box">
                            <div class="swap-label">
                                <span>From</span>
                                <span>Balance: <span id="fromBalance">10,000.00</span></span>
                            </div>
                            <div class="swap-input-row">
                                <input type="number" class="swap-input" id="fromAmount" placeholder="0.0" oninput="calculateSwap()">
                                <div class="token-select" onclick="openTokenModal('from')">
                                    <div class="token-icon" style="background: var(--gold);">$</div>
                                    <span class="token-symbol" id="fromToken">USDT</span>
                                    <i class="bi bi-chevron-down"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="swap-switch">
                            <button onclick="switchTokens()"><i class="bi bi-arrow-down-up"></i></button>
                        </div>
                        
                        <div class="swap-box">
                            <div class="swap-label">
                                <span>To</span>
                                <span>Balance: <span id="toBalance">5,000.00</span></span>
                            </div>
                            <div class="swap-input-row">
                                <input type="number" class="swap-input" id="toAmount" placeholder="0.0" readonly>
                                <div class="token-select" onclick="openTokenModal('to')">
                                    <div class="token-icon" style="background: var(--neon-green);">I</div>
                                    <span class="token-symbol" id="toToken">IGT</span>
                                    <i class="bi bi-chevron-down"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="swap-details" id="swapDetails">
                            <div class="swap-detail-row">
                                <span class="label">Rate</span>
                                <span class="value" id="swapRate">1 USDT = 1 IGT</span>
                            </div>
                            <div class="swap-detail-row">
                                <span class="label">Price Impact</span>
                                <span class="value" id="priceImpact">&lt;0.01%</span>
                            </div>
                            <div class="swap-detail-row">
                                <span class="label">Swap Fee (0.3%)</span>
                                <span class="value" id="swapFee">0.00 IGT</span>
                            </div>
                            <div class="swap-detail-row">
                                <span class="label">Admin Fee (0.1%)</span>
                                <span class="value" id="adminFee">0.00 IGT</span>
                            </div>
                            <div class="swap-detail-row">
                                <span class="label">Minimum Received</span>
                                <span class="value" id="minReceived">0.00 IGT</span>
                            </div>
                        </div>
                        
                        <button class="btn btn-primary" style="width: 100%; padding: 16px; font-size: 1.2em;" onclick="executeSwap()">
                            Swap
                        </button>
                    </div>
                </div>
                
                <!-- Recent Swaps -->
                <div class="card" style="margin-top: 20px;">
                    <div class="card-header">
                        <span class="card-title">Recent Swaps</span>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr><th>Pair</th><th>Amount</th><th>Rate</th><th>Time</th></tr>
                            </thead>
                            <tbody id="recentSwaps">
                                <tr><td>USDT ‚Üí IGT</td><td>1,000</td><td>1.00</td><td>2 min ago</td></tr>
                                <tr><td>IGT ‚Üí WETH</td><td>500</td><td>0.00029</td><td>5 min ago</td></tr>
                                <tr><td>WETH ‚Üí USDT</td><td>0.5</td><td>3,500</td><td>8 min ago</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ========== POOLS DECK ========== -->
        <div class="deck" id="deck-pools">
            <div class="card" style="margin-bottom: 20px;">
                <div class="card-header">
                    <span class="card-title">Liquidity Pools</span>
                    <button class="btn btn-green" onclick="openAddLiquidityModal()">+ Add Liquidity</button>
                </div>
            </div>
            
            <div class="pool-grid" id="poolGrid">
                <!-- Pools will be loaded here -->
            </div>
        </div>
        
        <!-- ========== FARMS DECK ========== -->
        <div class="deck" id="deck-farms">
            <div class="card" style="margin-bottom: 20px;">
                <div class="card-header">
                    <span class="card-title">Yield Farms</span>
                    <div style="display: flex; gap: 10px;">
                        <button class="btn btn-outline" style="padding: 8px 16px;">Live</button>
                        <button class="btn btn-outline" style="padding: 8px 16px;">Finished</button>
                    </div>
                </div>
            </div>
            
            <div class="farm-grid" id="farmGrid">
                <!-- Farms will be loaded here -->
            </div>
        </div>
        
        <!-- ========== TOKENS DECK ========== -->
        <div class="deck" id="deck-tokens">
            <div class="card">
                <div class="card-header">
                    <span class="card-title">Supported Tokens</span>
                    <input type="text" class="form-input" id="tokenSearch" placeholder="Search tokens..." style="width: 250px;" oninput="filterTokens()">
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr><th>Token</th><th>Symbol</th><th>Price</th><th>24h Change</th><th>Market Cap</th><th>Action</th></tr>
                        </thead>
                        <tbody id="tokenList">
                            <!-- Tokens will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- ========== ADMIN DECK ========== -->
        <div class="deck" id="deck-admin">
            <div class="admin-grid" id="adminStats">
                <!-- Stats will be loaded here -->
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div class="card">
                    <div class="card-header">
                        <span class="card-title">Fee Configuration</span>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label class="form-label">Swap Fee (%)</label>
                            <input type="number" class="form-input" id="adminSwapFee" value="0.3" step="0.01">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Admin Fee (%)</label>
                            <input type="number" class="form-input" id="adminAdminFee" value="0.1" step="0.01">
                        </div>
                        <div class="form-group">
                            <label class="form-label">LP Fee (%)</label>
                            <input type="number" class="form-input" id="adminLPFee" value="0.2" step="0.01">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Fee Recipient Address</label>
                            <input type="text" class="form-input" id="adminFeeRecipient" value="0xIerahkwa...Treasury">
                        </div>
                        <button class="btn btn-primary" style="width: 100%;" onclick="updateFees()">Update Fees</button>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <span class="card-title">Deployed Contracts</span>
                    </div>
                    <div class="card-body">
                        <div style="margin-bottom: 15px; padding: 12px; background: var(--bg-hover); border-radius: 10px;">
                            <div style="color: var(--gold); font-weight: 600;">Router</div>
                            <div style="font-size: 0.85em; color: #888; word-break: break-all;">0xIerahkwa...Router</div>
                        </div>
                        <div style="margin-bottom: 15px; padding: 12px; background: var(--bg-hover); border-radius: 10px;">
                            <div style="color: var(--gold); font-weight: 600;">Factory</div>
                            <div style="font-size: 0.85em; color: #888; word-break: break-all;">0xIerahkwa...Factory</div>
                        </div>
                        <div style="margin-bottom: 15px; padding: 12px; background: var(--bg-hover); border-radius: 10px;">
                            <div style="color: var(--gold); font-weight: 600;">MasterChef</div>
                            <div style="font-size: 0.85em; color: #888; word-break: break-all;">0xIerahkwa...MasterChef</div>
                        </div>
                        <button class="btn btn-purple" style="width: 100%;" onclick="openDeployModal()">Deploy New Contract</button>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Token Selection Modal -->
    <div class="modal-overlay" id="tokenModal">
        <div class="modal">
            <div class="modal-header">
                <span class="modal-title">Select Token</span>
                <button class="modal-close" onclick="closeModal('tokenModal')">&times;</button>
            </div>
            <input type="text" class="form-input" placeholder="Search by name or address..." style="margin-bottom: 20px;" oninput="filterModalTokens(this.value)">
            <div id="modalTokenList" style="max-height: 400px; overflow-y: auto;">
                <!-- Tokens will be listed here -->
            </div>
        </div>
    </div>
    
    <!-- Settings Modal -->
    <div class="modal-overlay" id="settingsModal">
        <div class="modal">
            <div class="modal-header">
                <span class="modal-title">Transaction Settings</span>
                <button class="modal-close" onclick="closeModal('settingsModal')">&times;</button>
            </div>
            <div class="form-group">
                <label class="form-label">Slippage Tolerance</label>
                <div class="slippage-options">
                    <button class="slippage-btn" onclick="setSlippage(0.1)">0.1%</button>
                    <button class="slippage-btn active" onclick="setSlippage(0.5)">0.5%</button>
                    <button class="slippage-btn" onclick="setSlippage(1)">1%</button>
                    <button class="slippage-btn" onclick="setSlippage(5)">5%</button>
                </div>
                <input type="number" class="form-input" id="customSlippage" placeholder="Custom %" style="margin-top: 10px;">
            </div>
            <div class="form-group">
                <label class="form-label">Transaction Deadline (minutes)</label>
                <input type="number" class="form-input" id="txDeadline" value="20">
            </div>
        </div>
    </div>
    
    <!-- Add Liquidity Modal -->
    <div class="modal-overlay" id="addLiquidityModal">
        <div class="modal">
            <div class="modal-header">
                <span class="modal-title">Add Liquidity</span>
                <button class="modal-close" onclick="closeModal('addLiquidityModal')">&times;</button>
            </div>
            <div class="form-group">
                <label class="form-label">Token 1</label>
                <div style="display: flex; gap: 10px;">
                    <input type="number" class="form-input" id="liqToken0Amount" placeholder="0.0" style="flex: 1;">
                    <select class="form-select" id="liqToken0" style="width: 120px;">
                        <option value="igt-main">IGT</option>
                        <option value="usdt">USDT</option>
                        <option value="weth">WETH</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label class="form-label">Token 2</label>
                <div style="display: flex; gap: 10px;">
                    <input type="number" class="form-input" id="liqToken1Amount" placeholder="0.0" style="flex: 1;">
                    <select class="form-select" id="liqToken1" style="width: 120px;">
                        <option value="usdt">USDT</option>
                        <option value="igt-main">IGT</option>
                        <option value="weth">WETH</option>
                    </select>
                </div>
            </div>
            <div class="swap-details">
                <div class="swap-detail-row">
                    <span class="label">Pool Share</span>
                    <span class="value">0.00%</span>
                </div>
                <div class="swap-detail-row">
                    <span class="label">LP Tokens</span>
                    <span class="value">0.00</span>
                </div>
            </div>
            <button class="btn btn-green" style="width: 100%;" onclick="addLiquidity()">Add Liquidity</button>
        </div>
    </div>
    
    <!-- Stake Modal -->
    <div class="modal-overlay" id="stakeModal">
        <div class="modal">
            <div class="modal-header">
                <span class="modal-title" id="stakeModalTitle">Stake</span>
                <button class="modal-close" onclick="closeModal('stakeModal')">&times;</button>
            </div>
            <div class="tabs">
                <button class="tab-btn active" onclick="setStakeTab('stake')">Stake</button>
                <button class="tab-btn" onclick="setStakeTab('unstake')">Unstake</button>
            </div>
            <div class="form-group">
                <label class="form-label">Amount</label>
                <input type="number" class="form-input" id="stakeAmount" placeholder="0.0">
                <div style="display: flex; justify-content: space-between; margin-top: 8px; font-size: 0.85em; color: #888;">
                    <span>Balance: <span id="stakeBalance">0.00</span></span>
                    <button style="background: none; border: none; color: var(--gold); cursor: pointer;" onclick="setMaxStake()">MAX</button>
                </div>
            </div>
            <button class="btn btn-green" style="width: 100%;" id="stakeActionBtn" onclick="executeStake()">Stake</button>
        </div>
    </div>
    
    <!-- Node Status -->
    <div class="node-status">
        <div class="node-dot"></div>
        <div class="node-info">
            <div class="name">Ierahkwa Futurehead Mamey Node</div>
            <div class="chain">Chain ID: 777777 | Block: 1,234,567</div>
        </div>
    </div>
    
    <script>
        // State
        let tokens = [];
        let pools = [];
        let farms = [];
        let slippage = 0.5;
        let selectedFromToken = 'usdt';
        let selectedToToken = 'igt-main';
        let tokenSelectMode = 'from';
        let selectedFarmId = null;
        let stakeAction = 'stake';
        
        // Navigation
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', e => {
                e.preventDefault();
                const view = link.dataset.view;
                document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                document.querySelectorAll('.deck').forEach(d => d.classList.remove('active'));
                link.classList.add('active');
                document.getElementById('deck-' + view).classList.add('active');
            });
        });
        
        // Load data from API
        async function loadTokens() {
            try {
                const res = await fetch('/api/token');
                tokens = await res.json();
                renderTokenList();
            } catch (e) { console.error('Failed to load tokens:', e); }
        }
        
        async function loadPools() {
            try {
                const res = await fetch('/api/pool');
                pools = await res.json();
                renderPools();
            } catch (e) { console.error('Failed to load pools:', e); }
        }
        
        async function loadFarms() {
            try {
                const res = await fetch('/api/farm/active');
                farms = await res.json();
                renderFarms();
            } catch (e) { console.error('Failed to load farms:', e); }
        }
        
        async function loadStats() {
            try {
                const res = await fetch('/api/admin/stats');
                const stats = await res.json();
                document.getElementById('tvlDisplay').textContent = '$' + (stats.totalTVL / 1000000).toFixed(1) + 'M';
                document.getElementById('volume24Display').textContent = '$' + (stats.volume24h / 1000000).toFixed(1) + 'M';
                renderAdminStats(stats);
            } catch (e) { console.error('Failed to load stats:', e); }
        }
        
        // Render functions
        function renderTokenList() {
            const tbody = document.getElementById('tokenList');
            tbody.innerHTML = tokens.map(t => `
                <tr>
                    <td><strong>${t.name}</strong></td>
                    <td style="color: var(--gold);">${t.symbol}</td>
                    <td>$${t.price.toLocaleString()}</td>
                    <td class="${t.priceChange24h >= 0 ? 'positive' : 'negative'}">${t.priceChange24h >= 0 ? '+' : ''}${t.priceChange24h}%</td>
                    <td>$${(t.marketCap / 1000000).toFixed(1)}M</td>
                    <td><button class="btn btn-outline" style="padding: 6px 12px; font-size: 0.85em;" onclick="selectTokenForSwap('${t.id}')">Trade</button></td>
                </tr>
            `).join('');
        }
        
        function renderPools() {
            const grid = document.getElementById('poolGrid');
            grid.innerHTML = pools.map(p => `
                <div class="pool-card">
                    <div class="pool-header">
                        <div class="pool-icons">
                            <div class="pool-icon">${(p.token0Id || '').substring(0, 2).toUpperCase()}</div>
                            <div class="pool-icon" style="background: var(--neon-cyan);">${(p.token1Id || '').substring(0, 2).toUpperCase()}</div>
                        </div>
                        <div>
                            <div class="pool-name">${p.name}</div>
                            <div class="pool-fee">Fee: ${(p.swapFee * 100).toFixed(2)}%</div>
                        </div>
                    </div>
                    <div class="pool-stats">
                        <div class="pool-stat">
                            <div class="value">$${(p.tvl / 1000000).toFixed(2)}M</div>
                            <div class="label">TVL</div>
                        </div>
                        <div class="pool-stat">
                            <div class="value">$${(p.volume24h / 1000).toFixed(0)}K</div>
                            <div class="label">24h Volume</div>
                        </div>
                        <div class="pool-stat">
                            <div class="value" style="color: var(--gold);">${p.apr.toFixed(1)}%</div>
                            <div class="label">APR</div>
                        </div>
                        <div class="pool-stat">
                            <div class="value">${(p.lpTokenSupply / 1000).toFixed(0)}K</div>
                            <div class="label">LP Supply</div>
                        </div>
                    </div>
                    <div class="pool-actions">
                        <button class="btn btn-green" onclick="openAddLiquidityModal('${p.id}')">Add</button>
                        <button class="btn btn-outline" onclick="openRemoveLiquidityModal('${p.id}')">Remove</button>
                    </div>
                </div>
            `).join('');
        }
        
        function renderFarms() {
            const grid = document.getElementById('farmGrid');
            grid.innerHTML = farms.map(f => `
                <div class="farm-card ${f.isFeatured ? 'featured' : ''}" style="position: relative;">
                    ${f.multiplier > 1 ? `<div class="multiplier-badge">${f.multiplier}x</div>` : ''}
                    <div class="farm-banner">
                        <div>
                            <div class="farm-title">${f.name}</div>
                            <div class="farm-subtitle">Earn ${f.rewardTokenSymbol}</div>
                        </div>
                        <div class="farm-apr">${f.apr.toFixed(1)}%<span> APR</span></div>
                    </div>
                    <div class="farm-body">
                        <div class="farm-stats">
                            <div class="farm-stat">
                                <div class="value">$${(f.tvl / 1000).toFixed(0)}K</div>
                                <div class="label">TVL</div>
                            </div>
                            <div class="farm-stat">
                                <div class="value">${f.stakersCount.toLocaleString()}</div>
                                <div class="label">Stakers</div>
                            </div>
                            <div class="farm-stat">
                                <div class="value">${f.lockDays > 0 ? f.lockDays + 'd' : 'None'}</div>
                                <div class="label">Lock</div>
                            </div>
                        </div>
                        <div style="display: flex; gap: 10px;">
                            <button class="btn btn-green" style="flex: 1;" onclick="openStakeModal('${f.id}')">Stake</button>
                            <button class="btn btn-outline" style="flex: 1;" onclick="harvest('${f.id}')">Harvest</button>
                        </div>
                    </div>
                </div>
            `).join('');
        }
        
        function renderAdminStats(stats) {
            const grid = document.getElementById('adminStats');
            grid.innerHTML = `
                <div class="admin-stat">
                    <div class="icon">üí∞</div>
                    <div class="value" style="color: var(--gold);">$${(stats.totalTVL / 1000000).toFixed(1)}M</div>
                    <div class="label">Total TVL</div>
                </div>
                <div class="admin-stat">
                    <div class="icon">üìä</div>
                    <div class="value" style="color: var(--neon-green);">$${(stats.volume24h / 1000000).toFixed(1)}M</div>
                    <div class="label">24h Volume</div>
                </div>
                <div class="admin-stat">
                    <div class="icon">üîÑ</div>
                    <div class="value" style="color: var(--neon-cyan);">${stats.swaps24h.toLocaleString()}</div>
                    <div class="label">24h Swaps</div>
                </div>
                <div class="admin-stat">
                    <div class="icon">üë•</div>
                    <div class="value" style="color: var(--neon-purple);">${stats.totalUsers.toLocaleString()}</div>
                    <div class="label">Total Users</div>
                </div>
                <div class="admin-stat">
                    <div class="icon">üíé</div>
                    <div class="value" style="color: var(--gold);">$${(stats.totalFees / 1000).toFixed(1)}K</div>
                    <div class="label">Total Fees</div>
                </div>
                <div class="admin-stat">
                    <div class="icon">üèä</div>
                    <div class="value" style="color: var(--neon-green);">${stats.totalPools}</div>
                    <div class="label">Pools</div>
                </div>
                <div class="admin-stat">
                    <div class="icon">üåæ</div>
                    <div class="value" style="color: var(--neon-cyan);">${stats.totalFarms}</div>
                    <div class="label">Farms</div>
                </div>
                <div class="admin-stat">
                    <div class="icon">ü™ô</div>
                    <div class="value" style="color: var(--neon-purple);">${stats.totalTokens}</div>
                    <div class="label">Tokens</div>
                </div>
            `;
        }
        
        // Swap functions
        async function calculateSwap() {
            const amount = parseFloat(document.getElementById('fromAmount').value) || 0;
            if (amount <= 0) {
                document.getElementById('toAmount').value = '';
                return;
            }
            
            try {
                const res = await fetch(`/api/swap/quote?tokenIn=${selectedFromToken}&tokenOut=${selectedToToken}&amount=${amount}`);
                const quote = await res.json();
                
                document.getElementById('toAmount').value = quote.amountOut.toFixed(6);
                document.getElementById('swapRate').textContent = `1 ${quote.tokenInSymbol} = ${quote.rate.toFixed(6)} ${quote.tokenOutSymbol}`;
                document.getElementById('priceImpact').textContent = quote.priceImpact.toFixed(2) + '%';
                document.getElementById('swapFee').textContent = quote.swapFee.toFixed(6) + ' ' + quote.tokenOutSymbol;
                document.getElementById('adminFee').textContent = quote.adminFee.toFixed(6) + ' ' + quote.tokenOutSymbol;
                document.getElementById('minReceived').textContent = quote.minimumReceived.toFixed(6) + ' ' + quote.tokenOutSymbol;
            } catch (e) {
                console.error('Failed to get quote:', e);
            }
        }
        
        function switchTokens() {
            [selectedFromToken, selectedToToken] = [selectedToToken, selectedFromToken];
            const fromToken = tokens.find(t => t.id === selectedFromToken);
            const toToken = tokens.find(t => t.id === selectedToToken);
            if (fromToken) document.getElementById('fromToken').textContent = fromToken.symbol;
            if (toToken) document.getElementById('toToken').textContent = toToken.symbol;
            calculateSwap();
        }
        
        async function executeSwap() {
            const amount = parseFloat(document.getElementById('fromAmount').value) || 0;
            if (amount <= 0) { alert('Enter amount'); return; }
            
            try {
                const res = await fetch('/api/swap', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        userId: 'demo-user',
                        tokenInId: selectedFromToken,
                        tokenOutId: selectedToToken,
                        amountIn: amount,
                        amountOutMin: parseFloat(document.getElementById('toAmount').value) * (1 - slippage / 100),
                        slippageTolerance: slippage,
                        walletAddress: '0xDemo...'
                    })
                });
                const tx = await res.json();
                alert(`Swap successful!\n\nTx: ${tx.txHash}\nReceived: ${tx.amountOut.toFixed(6)} ${tx.tokenOutSymbol}`);
                document.getElementById('fromAmount').value = '';
                document.getElementById('toAmount').value = '';
            } catch (e) {
                alert('Swap failed: ' + e.message);
            }
        }
        
        // Modal functions
        function openModal(id) { document.getElementById(id).classList.add('open'); }
        function closeModal(id) { document.getElementById(id).classList.remove('open'); }
        
        function openTokenModal(mode) {
            tokenSelectMode = mode;
            const modal = document.getElementById('tokenModal');
            const list = document.getElementById('modalTokenList');
            list.innerHTML = tokens.map(t => `
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; border-radius: 10px; cursor: pointer; transition: background 0.2s;" 
                     onmouseover="this.style.background='var(--bg-hover)'" 
                     onmouseout="this.style.background='transparent'"
                     onclick="selectToken('${t.id}')">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <div style="width: 36px; height: 36px; background: var(--gold); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700;">${t.symbol.substring(0, 2)}</div>
                        <div>
                            <div style="font-weight: 600;">${t.symbol}</div>
                            <div style="font-size: 0.85em; color: #888;">${t.name}</div>
                        </div>
                    </div>
                    <div style="text-align: right;">
                        <div>$${t.price.toLocaleString()}</div>
                    </div>
                </div>
            `).join('');
            openModal('tokenModal');
        }
        
        function selectToken(tokenId) {
            const token = tokens.find(t => t.id === tokenId);
            if (tokenSelectMode === 'from') {
                selectedFromToken = tokenId;
                document.getElementById('fromToken').textContent = token.symbol;
            } else {
                selectedToToken = tokenId;
                document.getElementById('toToken').textContent = token.symbol;
            }
            closeModal('tokenModal');
            calculateSwap();
        }
        
        function openSettingsModal() { openModal('settingsModal'); }
        
        function setSlippage(value) {
            slippage = value;
            document.querySelectorAll('.slippage-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }
        
        function openAddLiquidityModal(poolId) { openModal('addLiquidityModal'); }
        
        function openStakeModal(farmId) {
            selectedFarmId = farmId;
            const farm = farms.find(f => f.id === farmId);
            document.getElementById('stakeModalTitle').textContent = 'Stake ' + (farm?.stakeTokenSymbol || '');
            openModal('stakeModal');
        }
        
        function setStakeTab(action) {
            stakeAction = action;
            document.querySelectorAll('#stakeModal .tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById('stakeActionBtn').textContent = action === 'stake' ? 'Stake' : 'Unstake';
        }
        
        async function executeStake() {
            const amount = parseFloat(document.getElementById('stakeAmount').value) || 0;
            if (amount <= 0) { alert('Enter amount'); return; }
            
            const endpoint = stakeAction === 'stake' ? '/api/farm/stake' : '/api/farm/unstake';
            try {
                const res = await fetch(endpoint, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        userId: 'demo-user',
                        farmId: selectedFarmId,
                        amount: amount
                    })
                });
                const tx = await res.json();
                alert(`${stakeAction === 'stake' ? 'Staked' : 'Unstaked'} successfully!\nTx: ${tx.txHash}`);
                closeModal('stakeModal');
                loadFarms();
            } catch (e) {
                alert('Failed: ' + e.message);
            }
        }
        
        async function harvest(farmId) {
            try {
                const res = await fetch('/api/farm/harvest', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ userId: 'demo-user', farmId: farmId })
                });
                const tx = await res.json();
                alert(`Harvested ${tx.amount.toFixed(4)} tokens!\nTx: ${tx.txHash}`);
            } catch (e) {
                alert('Harvest failed: ' + e.message);
            }
        }
        
        async function addLiquidity() {
            const token0Amount = parseFloat(document.getElementById('liqToken0Amount').value) || 0;
            const token1Amount = parseFloat(document.getElementById('liqToken1Amount').value) || 0;
            if (token0Amount <= 0 || token1Amount <= 0) { alert('Enter amounts'); return; }
            
            try {
                const res = await fetch('/api/pool/add-liquidity', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        userId: 'demo-user',
                        poolId: 'pool-igt-usdt',
                        token0Amount: token0Amount,
                        token1Amount: token1Amount,
                        slippageTolerance: slippage
                    })
                });
                const tx = await res.json();
                alert(`Liquidity added!\nLP Tokens: ${tx.lpTokenAmount.toFixed(4)}\nTx: ${tx.txHash}`);
                closeModal('addLiquidityModal');
                loadPools();
            } catch (e) {
                alert('Failed: ' + e.message);
            }
        }
        
        async function updateFees() {
            try {
                const res = await fetch('/api/admin/fees', {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        swapFee: parseFloat(document.getElementById('adminSwapFee').value) / 100,
                        adminFeePercent: parseFloat(document.getElementById('adminAdminFee').value),
                        lpFeePercent: parseFloat(document.getElementById('adminLPFee').value),
                        feeRecipient: document.getElementById('adminFeeRecipient').value
                    })
                });
                const result = await res.json();
                alert('Fees updated successfully!');
            } catch (e) {
                alert('Failed to update fees: ' + e.message);
            }
        }
        
        function filterTokens() {
            const q = document.getElementById('tokenSearch').value.toLowerCase();
            const rows = document.querySelectorAll('#tokenList tr');
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(q) ? '' : 'none';
            });
        }
        
        // Connect wallet
        document.getElementById('btnConnect').addEventListener('click', () => {
            document.getElementById('btnConnect').textContent = 'Connected ‚úì';
            document.getElementById('btnConnect').style.borderColor = 'var(--neon-green)';
            document.getElementById('btnConnect').style.color = 'var(--neon-green)';
        });
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            loadTokens();
            loadPools();
            loadFarms();
            loadStats();
        });
    </script>
</body>
</html>
