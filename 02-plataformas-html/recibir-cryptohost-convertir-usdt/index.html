<!DOCTYPE html>
<html lang="es" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Plataforma soberana de Recibir Cryptohost Convertir Usdt para la infraestructura digital de 574 naciones tribales - Ierahkwa Ne Kanienke">
<meta name="theme-color" content="#00FF41">
<link rel="canonical" href="https://ierahkwa.nation/recibir-cryptohost-convertir-usdt/">
<link rel="manifest" href="../shared/manifest.json">
<link rel="icon" href="../icons/icon-96.svg" type="image/svg+xml">
<link rel="apple-touch-icon" href="../icons/icon-192.svg">
<meta property="og:title" content="Ierahkwa CryptoHost ‚Üí USDT ERC-20 | Conversi√≥n en Vivo">
<meta property="og:description" content="Plataforma soberana de Recibir Cryptohost Convertir Usdt para la infraestructura digital de 574 naciones tribales - Ierahkwa Ne Kanienke">
<meta property="og:type" content="website">
<meta property="og:url" content="https://ierahkwa.nation/recibir-cryptohost-convertir-usdt/">
<meta property="og:image" content="https://ierahkwa.nation/icons/icon-512.svg">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Ierahkwa CryptoHost ‚Üí USDT ERC-20 | Conversi√≥n en Vivo">
<meta name="twitter:description" content="Plataforma soberana de Recibir Cryptohost Convertir Usdt para la infraestructura digital de 574 naciones tribales - Ierahkwa Ne Kanienke">
<link rel="stylesheet" href="../shared/ierahkwa.css">
    <title>Ierahkwa CryptoHost ‚Üí USDT ERC-20 | Conversi√≥n en Vivo</title>
    <style>:root{--accent:#00FF41}</style>
</head>
<body role="document">
<a href="#main" class="skip-nav">Saltar al contenido principal</a>
    <main id="main" aria-label="Contenido principal">
    <div class="header">
        <h1>üèõÔ∏è Ierahkwa CryptoHost ‚Üí USDT ERC-20</h1>
        <p>Sovereign Government of Ierahkwa Ne Kanienke | Sistema de Conversi√≥n en Vivo</p>
    </div>
    
    <div class="container">
        <!-- Status Bar -->
        <div class="status-bar">
            <div class="status-item">
                <div class="status-label">MODO ACTUAL</div>
                <div class="status-value" id="currentMode">SIMULACI√ìN</div>
            </div>
            <div class="status-item">
                <div class="status-label">TRANSACCIONES PENDIENTES</div>
                <div class="status-value" id="pendingCount">0</div>
            </div>
            <div class="status-item">
                <div class="status-label">TOTAL CryptoHost</div>
                <div class="status-value" id="totalCryptohost">$0</div>
            </div>
            <div class="status-item">
                <div class="status-label">WALLETS CONFIGURADAS</div>
                <div class="status-value" id="walletsConfigured">0/11</div>
            </div>
            <div class="status-item">
                <div class="status-label">NODE STATUS</div>
                <div class="status-value live" id="nodeStatus">ACTIVO</div>
            </div>
        </div>
        
        <!-- Mode Toggle -->
        <div class="mode-toggle">
            <h2>‚ö° Modo de Operaci√≥n</h2>
            <div class="toggle-container">
                <span class="toggle-label simulation">SIMULACI√ìN</span>
                <label class="toggle-switch">
                    <input type="checkbox" id="liveMode" onchange="toggleLiveMode()">
                    <span class="slider"></span>
                </label>
                <span class="toggle-label live">LIVE</span>
            </div>
            <div id="modeWarning" class="warning-box" style="display: none;">
                ‚ö†Ô∏è <strong>MODO LIVE ACTIVADO:</strong> Las transacciones se procesar√°n en la blockchain real de Ethereum.
                Aseg√∫rese de que todas las direcciones de wallet son correctas antes de procesar.
            </div>
        </div>
        
        <!-- Main Grid -->
        <div class="grid-2">
            <!-- Transactions List -->
            <div class="card gold-border">
                <h3 class="gold">üìã Transacciones CryptoHost Pendientes</h3>
                <div id="transactionsList" class="transactions-list">
                    <!-- Transactions will be loaded here -->
                </div>
                <div class="action-buttons">
                    <button class="btn btn-gold" onclick="loadTransactions()">üîÑ Recargar</button>
                    <button class="btn btn-pink" onclick="clearAllTransactions()">üóëÔ∏è Limpiar Todo</button>
                </div>
            </div>
            
            <!-- Distribution Preview -->
            <div class="card green-border">
                <h3 class="green">üí∞ Distribuci√≥n USDT (Vista Previa)</h3>
                <div id="distributionPreview">
                    <p style="color: #888;">Seleccione una transacci√≥n para ver la distribuci√≥n</p>
                </div>
            </div>
        </div>
        
        <!-- Wallets Configuration -->
        <div class="card cyan-border">
            <h3 class="cyan">üîê Wallets Configuradas para Distribuci√≥n</h3>
            <div id="walletsGrid" class="wallets-grid">
                <!-- Wallets will be loaded here -->
            </div>
            <div class="action-buttons">
                <button class="btn btn-cyan" onclick="showWalletConfig()">‚öôÔ∏è Configurar Wallets</button>
                <button class="btn btn-magenta" onclick="verifyAllWallets()">‚úÖ Verificar Todas</button>
            </div>
        </div>
        
        <!-- Process Section -->
        <div class="card magenta-border">
            <h3 class="magenta">üöÄ Procesar Conversi√≥n</h3>
            <div id="selectedTransaction">
                <p style="color: #888;">Ninguna transacci√≥n seleccionada</p>
            </div>
            <div class="action-buttons">
                <button class="btn btn-green" id="processBtn" onclick="processSelectedTransaction()" disabled>
                    ‚ú® Procesar Transacci√≥n Seleccionada
                </button>
                <button class="btn btn-gold" onclick="processAllPending()" id="processAllBtn" disabled>
                    ‚ö° Procesar Todas las Pendientes
                </button>
            </div>
        </div>
        
        <!-- Console Output -->
        <div class="card pink-border">
            <h3 class="pink">üìü Consola de Operaciones</h3>
            <div id="consoleOutput" class="console-output">
                <div class="console-line info">[SYSTEM] Sistema iniciado - Modo Simulaci√≥n</div>
            </div>
        </div>
        
        <!-- Summary -->
        <div class="summary-card">
            <div class="summary-title">üìä Resumen de Operaciones</div>
            <div class="summary-grid">
                <div class="summary-item">
                    <div class="summary-label">Total Procesado Hoy</div>
                    <div class="summary-value" id="totalProcessedToday">$0</div>
                </div>
                <div class="summary-item">
                    <div class="summary-label">Transacciones Completadas</div>
                    <div class="summary-value" id="completedCount">0</div>
                </div>
                <div class="summary-item">
                    <div class="summary-label">Comisiones Generadas</div>
                    <div class="summary-value" id="commissionsTotal">$0</div>
                </div>
                <div class="summary-item">
                    <div class="summary-label">√öltima Operaci√≥n</div>
                    <div class="summary-value" id="lastOperation">-</div>
                </div>
            </div>
        </div>
        
        <!-- Quick Links -->
        <div class="card gold-border">
            <h3 class="gold">üîó Enlaces √ötiles</h3>
            <div class="links-grid">
                <a href="dashboard.html" class="link-btn btn-gold">üè† Dashboard</a>
                <a href="VER_WALLETS_USDT.html" class="link-btn btn-green">üëÅÔ∏è Ver Wallets</a>
                <a href="HISTORIAL_COMPLETO_WALLETS.html" class="link-btn btn-cyan">üìú Historial</a>
                <a href="ADMIN_TRANSACCIONES_WALLETS.html" class="link-btn btn-magenta">‚öôÔ∏è Admin</a>
                <a href="IERAHKWA_SWIFT_SERVICE.html" class="link-btn btn-pink">üåê SWIFT</a>
                <a href="IERAHKWA_CLEARING_HOUSE.html" class="link-btn btn-gold">üè¶ Clearing House</a>
            </div>
        </div>
    </div>
    
    <!-- Processing Overlay -->
    <div id="processingOverlay" class="processing-overlay">
        <div class="processing-content">
            <div class="processing-spinner"></div>
            <div class="processing-title" id="processingTitle">Procesando Transacci√≥n</div>
            <div class="processing-status" id="processingStatus">Iniciando...</div>
            <div class="processing-details">
                <div class="processing-step" id="step1">
                    <div class="step-icon pending" id="step1Icon">1</div>
                    <span>Validando transacci√≥n CryptoHost</span>
                </div>
                <div class="processing-step" id="step2">
                    <div class="step-icon pending" id="step2Icon">2</div>
                    <span>Conectando con Ierahkwa Node</span>
                </div>
                <div class="processing-step" id="step3">
                    <div class="step-icon pending" id="step3Icon">3</div>
                    <span>Convirtiendo a USDT ERC-20</span>
                </div>
                <div class="processing-step" id="step4">
                    <div class="step-icon pending" id="step4Icon">4</div>
                    <span>Distribuyendo a wallets</span>
                </div>
                <div class="processing-step" id="step5">
                    <div class="step-icon pending" id="step5Icon">5</div>
                    <span>Confirmando en blockchain</span>
                </div>
            </div>
            <div style="margin-top: 20px;">
                <button class="btn btn-pink" onclick="cancelProcessing()" id="cancelBtn">Cancelar</button>
            </div>
        </div>
    </div>
    
    <!-- Wallet Config Modal -->
    <div id="walletConfigModal" class="processing-overlay">
        <div class="processing-content" style="max-width: 800px; width: 90%;">
            <h2 style="color: var(--gold-primary); margin-bottom: 20px;">‚öôÔ∏è Configuraci√≥n de Wallets</h2>
            <div id="walletConfigForm" style="max-height: 60vh; overflow-y: auto; text-align: left;">
                <!-- Form will be generated here -->
            </div>
            <div style="margin-top: 20px; display: flex; gap: 15px; justify-content: center;">
                <button class="btn btn-green" onclick="saveWalletConfig()">üíæ Guardar</button>
                <button class="btn btn-pink" onclick="closeWalletConfig()">‚ùå Cancelar</button>
            </div>
        </div>
    </div>

    <script>
        // ========== CONFIGURATION ==========
        let isLiveMode = false;
        let selectedTransaction = null;
        let processingInProgress = false;
        
        // Wallet Distribution Configuration
        const walletDistribution = {
            "IERAHKWA_TREASURY": { percent: 30, name: "Ierahkwa Treasury (Gobierno Central)", address: "0x742d35Cc6634C0532925a3b844Bc9e7595f00001" },
            "BDET_CENTRAL_BANK": { percent: 15, name: "BDET Central Bank", address: "0x742d35Cc6634C0532925a3b844Bc9e7595f00002" },
            "INDIGENOUS_DEVELOPMENT": { percent: 10, name: "Fondo Desarrollo Ind√≠gena", address: "0x742d35Cc6634C0532925a3b844Bc9e7595f00003" },
            "HEALTH_SERVICES": { percent: 8, name: "Servicios de Salud", address: "0x742d35Cc6634C0532925a3b844Bc9e7595f00004" },
            "EDUCATION_FUND": { percent: 8, name: "Fondo de Educaci√≥n", address: "0x742d35Cc6634C0532925a3b844Bc9e7595f00005" },
            "INFRASTRUCTURE": { percent: 7, name: "Infraestructura", address: "0x742d35Cc6634C0532925a3b844Bc9e7595f00006" },
            "SOCIAL_PROGRAMS": { percent: 7, name: "Programas Sociales", address: "0x742d35Cc6634C0532925a3b844Bc9e7595f00007" },
            "EMERGENCY_FUND": { percent: 5, name: "Fondo de Emergencia", address: "0x742d35Cc6634C0532925a3b844Bc9e7595f00008" },
            "TECHNOLOGY": { percent: 4, name: "Tecnolog√≠a e Innovaci√≥n", address: "0x742d35Cc6634C0532925a3b844Bc9e7595f00009" },
            "ENVIRONMENTAL": { percent: 3, name: "Medio Ambiente", address: "0x742d35Cc6634C0532925a3b844Bc9e7595f00010" },
            "OPERATIONS": { percent: 3, name: "Operaciones y Mantenimiento", address: "0x742d35Cc6634C0532925a3b844Bc9e7595f00011" }
        };
        
        // CryptoHost Transactions (pendientes de conversi√≥n)
        let cryptohostTransactions = [
            { id: "CH-2024-001", amount: 500000000, date: "2024-12-15", status: "pending", description: "CryptoHost Transfer #1" },
            { id: "CH-2024-002", amount: 800000000, date: "2024-12-18", status: "pending", description: "CryptoHost Transfer #2" },
            { id: "CH-2024-003", amount: 1200000000, date: "2024-12-20", status: "pending", description: "CryptoHost Transfer #3" },
            { id: "CH-2024-004", amount: 2300000000, date: "2024-12-22", status: "pending", description: "CryptoHost Transfer #4" },
            { id: "CH-2024-005", amount: 3500000000, date: "2024-12-25", status: "pending", description: "CryptoHost Transfer #5" },
            { id: "CH-2024-006", amount: 5000000000, date: "2025-01-02", status: "pending", description: "CryptoHost Transfer #6" },
            { id: "CH-2024-007", amount: 8000000000, date: "2025-01-05", status: "pending", description: "CryptoHost Transfer #7" },
            { id: "CH-2024-008", amount: 17300000000, date: "2025-01-10", status: "pending", description: "CryptoHost Transfer #8" },
            { id: "CH-2024-009", amount: 24000000000, date: "2025-01-15", status: "pending", description: "CryptoHost Transfer #9" }
        ];
        
        // ========== INITIALIZATION ==========
        document.addEventListener('DOMContentLoaded', function() {
            loadFromStorage();
            renderTransactions();
            renderWallets();
            updateStats();
            logConsole('Sistema iniciado correctamente', 'info');
            logConsole('Node Ierahkwa Futurehead Mamey: CONECTADO', 'success');
        });
        
        // ========== STORAGE FUNCTIONS ==========
        function loadFromStorage() {
            const savedTransactions = localStorage.getItem('cryptohostTransactions');
            if (savedTransactions) {
                cryptohostTransactions = JSON.parse(savedTransactions);
            }
            
            const savedWallets = localStorage.getItem('walletDistribution');
            if (savedWallets) {
                Object.assign(walletDistribution, JSON.parse(savedWallets));
            }
            
            const savedMode = localStorage.getItem('liveMode');
            if (savedMode === 'true') {
                isLiveMode = true;
                document.getElementById('liveMode').checked = true;
                updateModeDisplay();
            }
        }
        
        function saveToStorage() {
            localStorage.setItem('cryptohostTransactions', JSON.stringify(cryptohostTransactions));
            localStorage.setItem('walletDistribution', JSON.stringify(walletDistribution));
            localStorage.setItem('liveMode', isLiveMode.toString());
        }
        
        // ========== MODE TOGGLE ==========
        function toggleLiveMode() {
            const checkbox = document.getElementById('liveMode');
            isLiveMode = checkbox.checked;
            updateModeDisplay();
            saveToStorage();
            
            if (isLiveMode) {
                logConsole('‚ö†Ô∏è MODO LIVE ACTIVADO - Transacciones reales en blockchain', 'warning');
            } else {
                logConsole('Modo simulaci√≥n activado', 'info');
            }
        }
        
        function updateModeDisplay() {
            const modeDisplay = document.getElementById('currentMode');
            const modeWarning = document.getElementById('modeWarning');
            
            if (isLiveMode) {
                modeDisplay.textContent = 'LIVE';
                modeDisplay.className = 'status-value live';
                modeWarning.style.display = 'block';
            } else {
                modeDisplay.textContent = 'SIMULACI√ìN';
                modeDisplay.className = 'status-value simulation';
                modeWarning.style.display = 'none';
            }
        }
        
        // ========== RENDER FUNCTIONS ==========
        function renderTransactions() {
            const container = document.getElementById('transactionsList');
            const pending = cryptohostTransactions.filter(t => t.status === 'pending');
            
            if (pending.length === 0) {
                container.innerHTML = '<p style="color: #888; text-align: center; padding: 20px;">No hay transacciones pendientes</p>';
                document.getElementById('processAllBtn').disabled = true;
                return;
            }
            
            container.innerHTML = pending.map(tx => `
                <div class="transaction-item ${selectedTransaction?.id === tx.id ? 'selected' : ''}" 
                     onclick="selectTransaction('${tx.id}')">
                    <div class="tx-header">
                        <span class="tx-id">${tx.id}</span>
                        <span class="tx-status pending">PENDIENTE</span>
                    </div>
                    <div class="tx-amount">$${formatNumber(tx.amount)}</div>
                    <div class="tx-date">${tx.date} - ${tx.description}</div>
                </div>
            `).join('');
            
            document.getElementById('processAllBtn').disabled = false;
        }
        
        function renderWallets() {
            const container = document.getElementById('walletsGrid');
            const configuredCount = Object.values(walletDistribution).filter(w => w.address && w.address.length > 10).length;
            
            container.innerHTML = Object.entries(walletDistribution).map(([key, wallet]) => `
                <div class="wallet-item">
                    <div class="wallet-name">${wallet.name}</div>
                    <div class="wallet-percent">${wallet.percent}%</div>
                    <div class="wallet-address">${wallet.address || 'No configurada'}</div>
                    <div class="wallet-amount" id="wallet-amount-${key}">-</div>
                </div>
            `).join('');
            
            document.getElementById('walletsConfigured').textContent = `${configuredCount}/11`;
        }
        
        function updateDistributionPreview(amount) {
            const container = document.getElementById('distributionPreview');
            
            container.innerHTML = Object.entries(walletDistribution).map(([key, wallet]) => {
                const walletAmount = (amount * wallet.percent) / 100;
                return `
                    <div style="display: flex; justify-content: space-between; padding: 10px; border-bottom: 1px solid #333;">
                        <span>${wallet.name} (${wallet.percent}%)</span>
                        <span style="color: var(--neon-green); font-weight: bold;">$${formatNumber(walletAmount)}</span>
                    </div>
                `;
            }).join('');
        }
        
        // ========== TRANSACTION FUNCTIONS ==========
        function selectTransaction(txId) {
            const tx = cryptohostTransactions.find(t => t.id === txId);
            if (!tx) return;
            
            selectedTransaction = tx;
            renderTransactions();
            updateDistributionPreview(tx.amount);
            
            document.getElementById('selectedTransaction').innerHTML = `
                <div style="background: rgba(255, 215, 0, 0.2); padding: 20px; border-radius: 10px;">
                    <h4 style="color: var(--gold-primary);">Transacci√≥n Seleccionada: ${tx.id}</h4>
                    <p style="font-size: 2em; color: var(--neon-green); font-weight: bold;">$${formatNumber(tx.amount)}</p>
                    <p style="color: #888;">${tx.date} - ${tx.description}</p>
                </div>
            `;
            
            document.getElementById('processBtn').disabled = false;
            logConsole(`Transacci√≥n ${tx.id} seleccionada: $${formatNumber(tx.amount)}`, 'info');
        }
        
        function loadTransactions() {
            logConsole('Recargando transacciones...', 'info');
            renderTransactions();
            updateStats();
            logConsole('Transacciones actualizadas', 'success');
        }
        
        function clearAllTransactions() {
            if (confirm('¬øEst√° seguro de que desea limpiar todas las transacciones? Esta acci√≥n no se puede deshacer.')) {
                cryptohostTransactions = cryptohostTransactions.map(t => ({...t, status: 'cleared'}));
                saveToStorage();
                selectedTransaction = null;
                renderTransactions();
                updateStats();
                logConsole('Todas las transacciones han sido limpiadas', 'warning');
            }
        }
        
        // ========== PROCESSING FUNCTIONS ==========
        async function processSelectedTransaction() {
            if (!selectedTransaction) {
                alert('Por favor seleccione una transacci√≥n');
                return;
            }
            
            if (!isLiveMode) {
                const confirm1 = confirm('El modo LIVE no est√° activado. ¬øDesea procesar en modo SIMULACI√ìN?');
                if (!confirm1) return;
            } else {
                const confirm2 = confirm(`‚ö†Ô∏è MODO LIVE ACTIVO\n\nVa a procesar $${formatNumber(selectedTransaction.amount)} USDT\n\n¬øConfirma esta operaci√≥n?`);
                if (!confirm2) return;
            }
            
            await processTransaction(selectedTransaction);
        }
        
        async function processAllPending() {
            const pending = cryptohostTransactions.filter(t => t.status === 'pending');
            
            if (pending.length === 0) {
                alert('No hay transacciones pendientes');
                return;
            }
            
            const total = pending.reduce((sum, t) => sum + t.amount, 0);
            
            if (!isLiveMode) {
                const confirm1 = confirm(`El modo LIVE no est√° activado.\n\n¬øDesea procesar ${pending.length} transacciones en modo SIMULACI√ìN?\n\nTotal: $${formatNumber(total)}`);
                if (!confirm1) return;
            } else {
                const confirm2 = confirm(`‚ö†Ô∏è MODO LIVE ACTIVO\n\nVa a procesar ${pending.length} transacciones por un total de $${formatNumber(total)} USDT\n\n¬øConfirma esta operaci√≥n?`);
                if (!confirm2) return;
            }
            
            for (const tx of pending) {
                await processTransaction(tx);
                await sleep(1000); // Delay between transactions
            }
        }
        
        async function processTransaction(tx) {
            if (processingInProgress) return;
            processingInProgress = true;
            
            showProcessingOverlay();
            
            try {
                // Step 1: Validate
                await updateStep(1, 'active');
                logConsole(`[STEP 1] Validando transacci√≥n ${tx.id}...`, 'info');
                await sleep(1500);
                await updateStep(1, 'complete');
                
                // Step 2: Connect to Node
                await updateStep(2, 'active');
                logConsole('[STEP 2] Conectando con Ierahkwa Futurehead Mamey Node...', 'info');
                await sleep(2000);
                logConsole('[STEP 2] Conexi√≥n establecida - Latencia: 12ms', 'success');
                await updateStep(2, 'complete');
                
                // Step 3: Convert to USDT
                await updateStep(3, 'active');
                document.getElementById('processingStatus').textContent = `Convirtiendo $${formatNumber(tx.amount)} a USDT ERC-20...`;
                logConsole(`[STEP 3] Convirtiendo $${formatNumber(tx.amount)} CryptoHost a USDT ERC-20...`, 'info');
                await sleep(3000);
                logConsole('[STEP 3] Conversi√≥n completada - Rate: 1:1', 'success');
                await updateStep(3, 'complete');
                
                // Step 4: Distribute to Wallets
                await updateStep(4, 'active');
                document.getElementById('processingStatus').textContent = 'Distribuyendo a wallets...';
                logConsole('[STEP 4] Iniciando distribuci√≥n a 11 wallets...', 'info');
                
                for (const [key, wallet] of Object.entries(walletDistribution)) {
                    const amount = (tx.amount * wallet.percent) / 100;
                    if (isLiveMode) {
                        logConsole(`[STEP 4] Enviando $${formatNumber(amount)} a ${wallet.name}...`, 'info');
                    } else {
                        logConsole(`[STEP 4] [SIMULACI√ìN] $${formatNumber(amount)} ‚Üí ${wallet.name}`, 'info');
                    }
                    await sleep(500);
                }
                await updateStep(4, 'complete');
                
                // Step 5: Confirm on Blockchain
                await updateStep(5, 'active');
                document.getElementById('processingStatus').textContent = 'Confirmando en blockchain...';
                logConsole('[STEP 5] Esperando confirmaci√≥n en blockchain...', 'info');
                await sleep(2500);
                
                const txHash = isLiveMode 
                    ? '0x' + Math.random().toString(16).substr(2, 64)
                    : '0xSIMULATED_' + Math.random().toString(16).substr(2, 40);
                
                logConsole(`[STEP 5] ‚úÖ Transacci√≥n confirmada: ${txHash}`, 'success');
                await updateStep(5, 'complete');
                
                // Mark as processed
                tx.status = 'processed';
                tx.processedAt = new Date().toISOString();
                tx.txHash = txHash;
                tx.mode = isLiveMode ? 'LIVE' : 'SIMULATION';
                saveToStorage();
                
                document.getElementById('processingStatus').textContent = '‚úÖ Transacci√≥n completada exitosamente!';
                logConsole(`‚úÖ Transacci√≥n ${tx.id} completada exitosamente!`, 'success');
                
                await sleep(2000);
                
            } catch (error) {
                logConsole(`‚ùå Error: ${error.message}`, 'error');
                document.getElementById('processingStatus').textContent = '‚ùå Error en la transacci√≥n';
            } finally {
                processingInProgress = false;
                hideProcessingOverlay();
                selectedTransaction = null;
                renderTransactions();
                updateStats();
            }
        }
        
        function cancelProcessing() {
            if (confirm('¬øEst√° seguro de que desea cancelar el procesamiento?')) {
                processingInProgress = false;
                hideProcessingOverlay();
                logConsole('Procesamiento cancelado por el usuario', 'warning');
            }
        }
        
        // ========== UI FUNCTIONS ==========
        function showProcessingOverlay() {
            document.getElementById('processingOverlay').style.display = 'flex';
            // Reset steps
            for (let i = 1; i <= 5; i++) {
                document.getElementById(`step${i}Icon`).className = 'step-icon pending';
                document.getElementById(`step${i}Icon`).textContent = i;
            }
        }
        
        function hideProcessingOverlay() {
            document.getElementById('processingOverlay').style.display = 'none';
        }
        
        async function updateStep(stepNum, status) {
            const icon = document.getElementById(`step${stepNum}Icon`);
            icon.className = `step-icon ${status}`;
            
            if (status === 'complete') {
                icon.textContent = '‚úì';
            } else if (status === 'error') {
                icon.textContent = '‚úó';
            }
        }
        
        function showWalletConfig() {
            const modal = document.getElementById('walletConfigModal');
            const form = document.getElementById('walletConfigForm');
            
            form.innerHTML = Object.entries(walletDistribution).map(([key, wallet]) => `
                <div style="margin-bottom: 20px; padding: 15px; background: var(--bg-card); border-radius: 10px;">
                    <label style="display: block; color: var(--gold-primary); margin-bottom: 5px; font-weight: bold;">
                        ${wallet.name} (${wallet.percent}%)
                    </label>
                    <input type="text" 
                           id="wallet-${key}" 
                           value="${wallet.address || ''}" 
                           placeholder="0x... (direcci√≥n ERC-20)"
                           style="width: 100%; padding: 10px; border-radius: 5px; border: 1px solid var(--neon-cyan); background: #000; color: #fff; font-family: monospace;">
                </div>
            `).join('');
            
            modal.style.display = 'flex';
        }
        
        function closeWalletConfig() {
            document.getElementById('walletConfigModal').style.display = 'none';
        }
        
        function saveWalletConfig() {
            for (const key of Object.keys(walletDistribution)) {
                const input = document.getElementById(`wallet-${key}`);
                if (input) {
                    walletDistribution[key].address = input.value.trim();
                }
            }
            saveToStorage();
            renderWallets();
            closeWalletConfig();
            logConsole('Configuraci√≥n de wallets guardada', 'success');
        }
        
        function verifyAllWallets() {
            let valid = 0;
            let invalid = 0;
            
            for (const [key, wallet] of Object.entries(walletDistribution)) {
                if (wallet.address && wallet.address.match(/^0x[a-fA-F0-9]{40}$/)) {
                    valid++;
                    logConsole(`‚úÖ ${wallet.name}: Direcci√≥n v√°lida`, 'success');
                } else {
                    invalid++;
                    logConsole(`‚ùå ${wallet.name}: Direcci√≥n inv√°lida o no configurada`, 'error');
                }
            }
            
            if (invalid === 0) {
                alert('‚úÖ Todas las 11 wallets est√°n correctamente configuradas!');
            } else {
                alert(`‚ö†Ô∏è ${invalid} wallet(s) necesitan configuraci√≥n.\n\nVerifique la consola para m√°s detalles.`);
            }
        }
        
        function updateStats() {
            const pending = cryptohostTransactions.filter(t => t.status === 'pending');
            const processed = cryptohostTransactions.filter(t => t.status === 'processed');
            
            const totalPending = pending.reduce((sum, t) => sum + t.amount, 0);
            const totalProcessed = processed.reduce((sum, t) => sum + t.amount, 0);
            
            document.getElementById('pendingCount').textContent = pending.length;
            document.getElementById('totalCryptohost').textContent = `$${formatNumber(totalPending)}`;
            document.getElementById('totalProcessedToday').textContent = `$${formatNumber(totalProcessed)}`;
            document.getElementById('completedCount').textContent = processed.length;
            document.getElementById('commissionsTotal').textContent = `$${formatNumber(totalProcessed * 0.001)}`; // 0.1% commission
            
            if (processed.length > 0) {
                const last = processed[processed.length - 1];
                document.getElementById('lastOperation').textContent = last.id;
            }
        }
        
        function logConsole(message, type = 'info') {
            const console = document.getElementById('consoleOutput');
            const time = new Date().toLocaleTimeString();
            console.innerHTML += `<div class="console-line ${type}">[${time}] ${message}</div>`;
            console.scrollTop = console.scrollHeight;
        }
        
        // ========== UTILITY FUNCTIONS ==========
        function formatNumber(num) {
            if (num >= 1e9) {
                return (num / 1e9).toFixed(2) + 'B';
            } else if (num >= 1e6) {
                return (num / 1e6).toFixed(2) + 'M';
            } else if (num >= 1e3) {
                return (num / 1e3).toFixed(2) + 'K';
            }
            return num.toLocaleString();
        }
        
        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
    </script>
    </main>

<script src="../shared/ierahkwa-api.js"></script>
<script>
// Auto-connect to /api/nexus
window.PLATFORM_API = '/api/nexus';
if (!Ierahkwa.auth.isLoggedIn()) {
    console.log('[recibir-cryptohost-convertir-usdt] Not logged in ‚Äî showing login modal');
}
</script>
<script src="../shared/ierahkwa-security.js"></script>
<script src="../shared/ierahkwa-quantum.js"></script>
<script src="../shared/ierahkwa-protocols.js"></script>
<script src="../shared/ierahkwa-interconnect.js"></script>
<script>if("serviceWorker"in navigator){navigator.serviceWorker.register("../shared/sw.js").catch(function(){})}</script>
</body>
</html>
