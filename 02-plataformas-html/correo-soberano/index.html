<!DOCTYPE html>
<html lang="es" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Plataforma soberana de Correo para la infraestructura digital de 574 naciones tribales - Ierahkwa Ne Kanienke">
<meta name="theme-color" content="#00FF41">
<link rel="canonical" href="https://ierahkwa.nation/correo-soberano/">
<link rel="manifest" href="../shared/manifest.json">
<link rel="icon" href="../icons/icon-96.svg" type="image/svg+xml">
<link rel="apple-touch-icon" href="../icons/icon-192.svg">
<meta property="og:title" content="CorreoSoberano â€” Email Soberano | MameyNode">
<meta property="og:description" content="Plataforma soberana de Correo para la infraestructura digital de 574 naciones tribales - Ierahkwa Ne Kanienke">
<meta property="og:type" content="website">
<meta property="og:url" content="https://ierahkwa.nation/correo-soberano/">
<meta property="og:image" content="https://ierahkwa.nation/icons/icon-512.svg">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="CorreoSoberano â€” Email Soberano | MameyNode">
<meta name="twitter:description" content="Plataforma soberana de Correo para la infraestructura digital de 574 naciones tribales - Ierahkwa Ne Kanienke">
<link rel="stylesheet" href="../shared/ierahkwa.css">
<title>CorreoSoberano â€” Email Soberano | MameyNode</title>
<style>:root{--accent:#00FF41}</style>
</head>
<body role="document">
<a href="#main" class="skip-nav" style="position:absolute;top:-40px;left:0;background:#00FF41;color:#09090d;padding:8px 16px;z-index:10000;font-weight:700;transition:top .2s" onfocus="this.style.top='0'" onblur="this.style.top='-40px'">Skip to main content</a>

<main id="main" class="app" aria-label="Contenido principal">

  <!-- TOP BAR -->
  <div class="topbar">
    <div class="topbar-brand">
      <div class="logo">âœ‰</div>
      <div><h1>CorreoSoberano</h1><span>MameyNode v1.0</span></div>
    </div>
    <div class="search-bar">
      <span class="search-icon">âŒ•</span>
      <input type="text" placeholder="Buscar correos, contactos, archivos..." />
    </div>
    <div class="topbar-actions">
      <button class="topbar-btn encrypted" title="Cifrado CuÃ¡ntico Activo">ğŸ”’</button>
      <button class="topbar-btn" title="Notificaciones" onclick="showToast()">ğŸ””</button>
      <button class="topbar-btn" title="ConfiguraciÃ³n">âš™</button>
      <div class="avatar" title="cacike@soberano.bo">CA</div>
    </div>
  </div>

  <!-- SIDEBAR -->
  <div class="sidebar">
    <button class="compose-btn" onclick="openCompose()"><span style="font-size:16px">âœ</span><span>Nuevo Correo</span></button>
    <div class="sidebar-section"><div class="sidebar-section-title">Correo</div></div>
    <div class="sidebar-item active" onclick="setFolder(this,'Entrada')"><span class="icon" aria-hidden="true">ğŸ“¥</span><span>Entrada</span><span class="badge">24</span></div>
    <div class="sidebar-item" onclick="setFolder(this,'Destacados')"><span class="icon" aria-hidden="true">â­</span><span>Destacados</span><span class="badge" style="background:var(--draft-amber);color:#0a0a0f">3</span></div>
    <div class="sidebar-item" onclick="setFolder(this,'Enviados')"><span class="icon" aria-hidden="true">ğŸ“¤</span><span>Enviados</span></div>
    <div class="sidebar-item" onclick="setFolder(this,'Borradores')"><span class="icon" aria-hidden="true">ğŸ“</span><span>Borradores</span><span class="badge" style="background:var(--bg-hover);color:var(--text-secondary)">2</span></div>
    <div class="sidebar-item" onclick="setFolder(this,'Archivo')"><span class="icon" aria-hidden="true">ğŸ“</span><span>Archivo</span></div>
    <div class="sidebar-item" onclick="setFolder(this,'Spam')"><span class="icon" aria-hidden="true">ğŸš«</span><span>Spam</span></div>
    <div class="sidebar-item" onclick="setFolder(this,'Papelera')"><span class="icon" aria-hidden="true">ğŸ—‘</span><span>Papelera</span></div>
    <div class="sidebar-section"><div class="sidebar-section-title">Etiquetas</div></div>
    <div class="sidebar-item" onclick="setFolder(this,'BDET Bank')"><span class="icon" style="color:var(--wampum)">â—</span><span>BDET Bank</span><span class="badge wampum">8</span></div>
    <div class="sidebar-item" onclick="setFolder(this,'Gobierno')"><span class="icon" style="color:var(--sent-green)">â—</span><span>Gobierno</span></div>
    <div class="sidebar-item" onclick="setFolder(this,'Soberano')"><span class="icon" style="color:var(--gold)">â—</span><span>Soberano</span></div>
    <div class="sidebar-item" onclick="setFolder(this,'Cifrado')"><span class="icon" style="color:var(--turquoise)">â—</span><span>Cifrado</span></div>
    <div class="sidebar-item" onclick="setFolder(this,'Personal')"><span class="icon" style="color:var(--red-alert)">â—</span><span>Personal</span></div>
    <div class="sidebar-section"><div class="sidebar-section-title">Plataformas</div></div>
    <div class="sidebar-item" onclick="setFolder(this,'RentaSoberano')"><span class="icon" aria-hidden="true">ğŸ’¼</span><span>RentaSoberano</span></div>
    <div class="sidebar-item" onclick="setFolder(this,'SoberanoMarket')"><span class="icon" aria-hidden="true">ğŸ›’</span><span>SoberanoMarket</span></div>
    <div class="sidebar-item" onclick="setFolder(this,'SoberanoDoctor')"><span class="icon" aria-hidden="true">ğŸ©º</span><span>SoberanoDoctor</span></div>
    <div class="sidebar-footer">
      <div style="font-size:12px;color:var(--text-secondary);font-weight:600">cacike@soberano.bo</div>
      <div class="storage-bar"><div class="fill"></div></div>
      <div class="storage-text">3.4 GB de 10 GB â€” MameyNode</div>
    </div>
  </div>

  <!-- EMAIL LIST -->
  <div class="email-list">
    <div class="list-header"><h2>Entrada</h2><span class="count">24 correos</span></div>
    <div class="list-filters">
      <button class="filter-chip active">Todos</button><button class="filter-chip">No leÃ­dos</button>
      <button class="filter-chip">Cifrados</button><button class="filter-chip">BDET</button><button class="filter-chip">Urgentes</button>
    </div>
    <div class="email-items" id="emailList"></div>
  </div>

  <!-- EMAIL READER -->
  <div class="reader" id="reader">
    <div class="reader-header">
      <div class="reader-actions">
        <button class="reader-btn gold">â†© Responder</button><button class="reader-btn">â†ª Reenviar</button>
        <button class="reader-btn">ğŸ“ Archivar</button><button class="reader-btn">ğŸ· Etiquetar</button>
        <button class="reader-btn">â° Posponer</button><button class="reader-btn danger">ğŸ—‘ Eliminar</button>
      </div>
      <div class="reader-subject" id="readerSubject">Propuesta: IntegraciÃ³n SoberanoMarket con BDET Bank</div>
      <div class="reader-meta">
        <div class="reader-avatar" id="readerAvatar">MC</div>
        <div class="reader-from">
          <div class="name" id="readerName">MarÃ­a Canaima</div>
          <div class="email-addr" id="readerEmail">m.canaima@soberano.bo</div>
          <div class="to-line">para: cacike@soberano.bo</div>
        </div>
        <div style="text-align:right">
          <div class="reader-date" id="readerDate">21 Feb 2026 Â· 14:32</div>
          <div class="encryption-badge">ğŸ”’ Cifrado CuÃ¡ntico Â· E2E</div>
        </div>
      </div>
    </div>
    <div class="reader-body" id="readerBody">
      <p>Cacike,</p>
      <p>Le escribo para presentar la propuesta de integraciÃ³n completa entre SoberanoMarket y el sistema de pagos BDET Bank. Hemos completado las pruebas del API de merchant y los resultados son prometedores.</p>
      <div class="bdet-payment-card">
        <div class="bdet-title">ğŸ’ Solicitud de Pago BDET</div>
        <div class="bdet-amount">â“Œ 2,500.00</div>
        <div class="bdet-desc">Desarrollo de integraciÃ³n SoberanoMarket â†’ BDET Merchant API (fase 1)</div>
        <div class="bdet-actions"><button class="bdet-btn approve" onclick="approvePayment(this)">âœ“ Aprobar Pago</button><button class="bdet-btn decline">âœ— Rechazar</button></div>
      </div>
      <p>Los puntos clave de la propuesta incluyen:</p>
      <p>La integraciÃ³n permitirÃ¡ que cada vendedor en SoberanoMarket reciba pagos directamente a su cuenta BDET, con liquidaciÃ³n instantÃ¡nea a travÃ©s de MameyNode. El smart contract de escrow protegerÃ¡ ambas partes en cada transacciÃ³n.</p>
      <p>Hemos implementado el split de comisiones: Vendedor 88%, Plataforma 4%, Impuesto Soberano 6%, Fondo Comunitario 2%. Todo automÃ¡tico, todo en blockchain.</p>
      <div class="attachment-block"><div class="attachment-icon">ğŸ“„</div><div class="attachment-info"><div class="att-name">Propuesta_SoberanoMarket_BDET_v2.pdf</div><div class="att-size">2.4 MB Â· Cifrado Â· MameyNode Hash: 0x7a3f...b2e1</div></div></div>
      <div class="attachment-block"><div class="attachment-icon">ğŸ“Š</div><div class="attachment-info"><div class="att-name">Proyecciones_Revenue_Q1_2026.xlsx</div><div class="att-size">847 KB Â· Cifrado Â· MameyNode Hash: 0x9c2d...f4a8</div></div></div>
      <p>Quedo atenta a su revisiÃ³n. Si aprueba el pago, comenzamos implementaciÃ³n esta semana.</p>
      <p>SoberanÃ­a siempre. ğŸŒ¿</p>
      <div class="signature"><strong>MarÃ­a Canaima</strong><br>Directora de IntegraciÃ³n Â· SoberanoMarket<br>m.canaima@soberano.bo Â· +591 7XX-XXXX<br><span style="font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--turquoise)">ğŸ”’ Verificado Â· ID Soberano: SOV-MC-7291</span></div>
    </div>
    <div class="reader-reply"><div class="reply-input"><textarea placeholder="Responder a MarÃ­a Canaima... (cifrado E2E activo)"></textarea><button class="reply-send">Enviar ğŸ”’</button></div></div>
  </div>
</div>

<!-- COMPOSE MODAL -->
<div class="compose-overlay" id="composeOverlay">
  <div class="compose-modal">
    <div class="compose-header"><h3>âœ Nuevo Correo Soberano</h3><button class="compose-close" onclick="closeCompose()">âœ•</button></div>
    <div class="compose-fields">
      <div class="compose-field"><label>Para:</label><input type="text" placeholder="nombre@soberano.bo" /></div>
      <div class="compose-field"><label>CC:</label><input type="text" placeholder="AÃ±adir destinatarios..." /></div>
      <div class="compose-field"><label>Asunto:</label><input type="text" placeholder="Asunto del correo..." /></div>
    </div>
    <div class="compose-body-area"><textarea placeholder="Escribe tu mensaje...&#10;&#10;Todo correo enviado desde CorreoSoberano estÃ¡ protegido con cifrado cuÃ¡ntico end-to-end a travÃ©s de MameyNode."></textarea></div>
    <div class="compose-footer">
      <div class="compose-footer-left">
        <button class="compose-tool" title="Adjuntar archivo">ğŸ“</button><button class="compose-tool" title="Insertar pago BDET">ğŸ’</button>
        <button class="compose-tool active" title="Cifrado cuÃ¡ntico activo">ğŸ”’</button><button class="compose-tool" title="Firma digital">âœ</button>
        <button class="compose-tool" title="Programar envÃ­o">â°</button><button class="compose-tool" title="Atabey â€” Traducir">ğŸŒ</button>
      </div>
      <button class="send-btn" onclick="sendEmail()">Enviar ğŸ”’</button>
    </div>
  </div>
</div>

<!-- TOAST -->
<div class="toast" id="toast">
  <div class="toast-title">Nuevo correo cifrado</div>
  <div class="toast-msg">De: tesoreria@bdet.soberano.bo â€” LiquidaciÃ³n mensual completada</div>
</div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CORREOSOBERANO â€” EMAIL DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const emails = [
  {id:1,sender:"MarÃ­a Canaima",email:"m.canaima@soberano.bo",initials:"MC",subject:"Propuesta: IntegraciÃ³n SoberanoMarket con BDET Bank",preview:"Le escribo para presentar la propuesta de integraciÃ³n completa entre SoberanoMarket y el sistema de pagos BDET...",time:"14:32",date:"21 Feb 2026 Â· 14:32",unread:true,tags:["encrypted","bdet"],color:"linear-gradient(135deg, var(--turquoise), var(--wampum))",body:`<p>Cacike,</p><p>Le escribo para presentar la propuesta de integraciÃ³n completa entre SoberanoMarket y el sistema de pagos BDET Bank. Hemos completado las pruebas del API de merchant y los resultados son prometedores.</p><div class="bdet-payment-card"><div class="bdet-title">ğŸ’ Solicitud de Pago BDET</div><div class="bdet-amount">â“Œ 2,500.00</div><div class="bdet-desc">Desarrollo de integraciÃ³n SoberanoMarket â†’ BDET Merchant API (fase 1)</div><div class="bdet-actions"><button class="bdet-btn approve" onclick="approvePayment(this)">âœ“ Aprobar Pago</button><button class="bdet-btn decline">âœ— Rechazar</button></div></div><p>La integraciÃ³n permitirÃ¡ que cada vendedor en SoberanoMarket reciba pagos directamente a su cuenta BDET, con liquidaciÃ³n instantÃ¡nea a travÃ©s de MameyNode.</p><p>Split de comisiones: Vendedor 88%, Plataforma 4%, Impuesto Soberano 6%, Fondo Comunitario 2%.</p><div class="attachment-block"><div class="attachment-icon">ğŸ“„</div><div class="attachment-info"><div class="att-name">Propuesta_SoberanoMarket_BDET_v2.pdf</div><div class="att-size">2.4 MB Â· Cifrado Â· Hash: 0x7a3f...b2e1</div></div></div><div class="attachment-block"><div class="attachment-icon">ğŸ“Š</div><div class="attachment-info"><div class="att-name">Proyecciones_Revenue_Q1_2026.xlsx</div><div class="att-size">847 KB Â· Cifrado Â· Hash: 0x9c2d...f4a8</div></div></div><p>Quedo atenta a su revisiÃ³n.</p><p>SoberanÃ­a siempre. ğŸŒ¿</p><div class="signature"><strong>MarÃ­a Canaima</strong><br>Directora de IntegraciÃ³n Â· SoberanoMarket<br>m.canaima@soberano.bo<br><span style="font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--turquoise)">ğŸ”’ Verificado Â· ID Soberano: SOV-MC-7291</span></div>`},
  {id:2,sender:"BDET Bank â€” TesorerÃ­a",email:"tesoreria@bdet.soberano.bo",initials:"BD",subject:"âœ… LiquidaciÃ³n mensual completada â€” Enero 2026",preview:"Se ha completado la liquidaciÃ³n del mes de enero. Total procesado: â“Œ 1,247,832.50 a travÃ©s de 24 plataformas...",time:"12:18",date:"21 Feb 2026 Â· 12:18",unread:true,tags:["bdet","priority"],color:"linear-gradient(135deg, var(--wampum), var(--gold))",body:`<p>Estimado Cacike,</p><p>La liquidaciÃ³n mensual de enero 2026 ha sido completada exitosamente en MameyNode.</p><div class="bdet-payment-card"><div class="bdet-title">ğŸ’ Resumen de LiquidaciÃ³n â€” Enero 2026</div><div class="bdet-amount">â“Œ 1,247,832.50</div><div class="bdet-desc">Total procesado a travÃ©s de 24 plataformas Soberano Â· 89,412 transacciones</div></div><p><strong>Desglose:</strong> SoberanoMarket â“Œ423,100 Â· RentaSoberano â“Œ287,500 Â· SoberanoUber â“Œ198,400 Â· SoberanoEats â“Œ156,200 Â· SoberanoDoctor â“Œ89,300 Â· Otras â“Œ93,332.50</p><div class="attachment-block"><div class="attachment-icon">ğŸ“Š</div><div class="attachment-info"><div class="att-name">BDET_Liquidacion_Enero_2026.pdf</div><div class="att-size">5.1 MB Â· Cifrado Â· Hash: 0xb4c2...8f31</div></div></div><div class="signature"><strong>Departamento de TesorerÃ­a</strong><br>BDET Bank<br><span style="font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--wampum)">ğŸ¦ Verificado Â· BDET v3.2</span></div>`},
  {id:3,sender:"Consejo de Seguridad AI",email:"aifortress@soberano.bo",initials:"AI",subject:"ğŸ›¡ Reporte Semanal â€” AI Fortress Â· 0 brechas detectadas",preview:"El sistema AI Fortress reporta cero brechas de seguridad en la Ãºltima semana. 42 motores operando al 99.97%...",time:"10:05",date:"21 Feb 2026 Â· 10:05",unread:true,tags:["encrypted","soberano"],color:"linear-gradient(135deg, var(--turquoise), var(--sent-green))",body:`<p>Cacike,</p><p>Reporte semanal AI Fortress â€” Semana 14-21 Feb 2026.</p><p><strong>Estado: âœ… OPERACIONAL</strong></p><p>42 motores AI al 99.97%. 0 brechas. 2,847 intentos bloqueados. Cifrado cuÃ¡ntico activo en todos los nodos.</p><div class="attachment-block"><div class="attachment-icon">ğŸ›¡</div><div class="attachment-info"><div class="att-name">AIFortress_Weekly_W08_2026.pdf</div><div class="att-size">1.8 MB Â· Cifrado CuÃ¡ntico Â· Hash: 0xe7f1...2a9c</div></div></div><div class="signature"><strong>AI Fortress â€” Consejo de Seguridad</strong><br><span style="font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--turquoise)">ğŸ›¡ 42 motores activos</span></div>`},
  {id:4,sender:"NCAI â€” Digital Sovereignty",email:"digital@ncai.org",initials:"NC",subject:"RE: InvitaciÃ³n a la Red Soberana de las AmÃ©ricas",preview:"Thank you for your compelling presentation of the Sovereign Digital Nation framework. The National Congress is very interested...",time:"09:41",date:"21 Feb 2026 Â· 09:41",unread:true,tags:["priority","soberano"],color:"linear-gradient(135deg, var(--gold), var(--red-alert))",body:`<p>Dear Cacike,</p><p>Thank you for your compelling presentation of the Sovereign Digital Nation framework.</p><p>The NCAI has reviewed your proposal with great interest, particularly our Center for Tribal Digital Sovereignty initiative. We would like to schedule a meeting to discuss collaboration on: 1) BDET Bank pilot with 5 tribal nations, 2) Atabey Translator for Navajo/Cherokee/Lakota, 3) SoberanoDoctor telemedicine, 4) RentaSoberano workforce marketplace.</p><p>In solidarity,</p><div class="signature"><strong>Dr. Sarah Whitehawk</strong><br>Director, Center for Tribal Digital Sovereignty<br>NCAI Â· Washington, D.C.<br><span style="font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--gold)">ğŸ¦… 574 Tribal Nations</span></div>`},
  {id:5,sender:"Pupitre â€” Sistema Educativo",email:"sistema@pupitre.soberano.bo",initials:"PU",subject:"ğŸ“š EstadÃ­sticas semanales: 12,847 estudiantes activos",preview:"El sistema educativo Pupitre reporta un crecimiento del 23% en estudiantes activos. Nuevas lecciones en Quechua disponibles...",time:"08:15",date:"21 Feb 2026 Â· 08:15",unread:false,tags:["soberano"],color:"linear-gradient(135deg, var(--draft-amber), var(--gold))",body:`<p>Cacike,</p><p>Reporte semanal Pupitre â€” Semana 08/2026.</p><p><strong>Estudiantes:</strong> 12,847 (+23%) Â· <strong>Lecciones:</strong> 47,291 Â· <strong>Idiomas:</strong> 14 Â· <strong>Certificados:</strong> 234</p><div class="signature"><strong>Sistema Pupitre</strong><br><span style="font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--draft-amber)">ğŸ“š SoberanoTeach AI</span></div>`},
  {id:6,sender:"FILAC â€” Fondo IndÃ­gena",email:"secretaria@filac.org",initials:"FI",subject:"InterÃ©s en plataforma soberana â€” ReuniÃ³n propuesta",preview:"Hemos recibido con mucho interÃ©s su propuesta sobre la Red Soberana Digital. Representamos a 19 paÃ­ses y 58 millones...",time:"Ayer",date:"20 Feb 2026 Â· 17:45",unread:false,tags:["priority"],color:"linear-gradient(135deg, var(--sent-green), var(--turquoise))",body:`<p>Estimado Cacike,</p><p>Hemos recibido con mucho interÃ©s su propuesta. Representamos 19 paÃ­ses y 58 millones de personas indÃ­genas. Proponemos reuniÃ³n para explorar BDET Bank, Atabey y SoberanoDoctor.</p><div class="signature"><strong>SecretarÃ­a TÃ©cnica â€” FILAC</strong><br><span style="font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--sent-green)">ğŸŒ 19 paÃ­ses Â· 58M personas</span></div>`},
  {id:7,sender:"SoberanoUber â€” Dispatch AI",email:"dispatch@soberanouber.soberano.bo",initials:"SU",subject:"Reporte: 3,291 viajes completados hoy â€” Revenue â“Œ 14,832",preview:"El sistema de transporte soberano reporta 3,291 viajes completados hoy con un revenue de â“Œ 14,832. Tiempo promedio...",time:"Ayer",date:"20 Feb 2026 Â· 22:00",unread:false,tags:["bdet"],color:"linear-gradient(135deg, var(--wampum), var(--turquoise))",body:`<p>Reporte diario SoberanoUber â€” 20 Feb 2026</p><p><strong>Viajes:</strong> 3,291 Â· <strong>Revenue:</strong> â“Œ14,832 Â· <strong>Conductores:</strong> 487 Â· <strong>Espera:</strong> 4.2 min Â· <strong>SatisfacciÃ³n:</strong> 4.8/5.0</p><div class="signature"><strong>SoberanoUber AI Dispatch</strong><br><span style="font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--wampum)">ğŸš— AI Dispatch v2.1</span></div>`},
  {id:8,sender:"Roberto TaÃ­no",email:"r.taino@soberano.bo",initials:"RT",subject:"ActualizaciÃ³n: MameyNode v4.2 â€” Nuevos smart contracts desplegados",preview:"Hemos desplegado exitosamente MameyNode v4.2 con 12 nuevos smart contracts para las plataformas Soberano...",time:"20 Feb",date:"20 Feb 2026 Â· 15:30",unread:false,tags:["encrypted","soberano"],color:"linear-gradient(135deg, var(--turquoise), var(--gold))",body:`<p>Cacike,</p><p>MameyNode v4.2 desplegado. 12 nuevos smart contracts. Gas fees reducidos 34%. Identidad soberana v2 con biomÃ©tricos. Cero downtime.</p><div class="signature"><strong>Roberto TaÃ­no</strong><br>Lead Blockchain Engineer<br><span style="font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--turquoise)">â›“ MameyNode Core Team</span></div>`},
  {id:9,sender:"COICA â€” AmazonÃ­a",email:"coordinacion@coicamazonia.org",initials:"CO",subject:"Propuesta de colaboraciÃ³n â€” 3.5 millones de beneficiarios potenciales",preview:"La Coordinadora de las Organizaciones IndÃ­genas de la Cuenca AmazÃ³nica ha revisado su propuesta para la Red Soberana...",time:"19 Feb",date:"19 Feb 2026 Â· 11:20",unread:false,tags:["priority","gov"],color:"linear-gradient(135deg, var(--sent-green), var(--gold))",body:`<p>Estimado Cacike,</p><p>COICA (9 paÃ­ses amazÃ³nicos, 3.5M personas) ha revisado su propuesta con gran interÃ©s. Proponemos piloto en 5 comunidades de Ecuador, PerÃº y Brasil.</p><div class="signature"><strong>CoordinaciÃ³n General â€” COICA</strong><br><span style="font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--sent-green)">ğŸŒ³ 3.5M personas</span></div>`},
  {id:10,sender:"SoberanoDoctor â€” AI Triage",email:"triage@soberanodoctor.soberano.bo",initials:"SD",subject:"Alerta: 847 consultas de telemedicina â€” RÃ©cord mensual",preview:"El sistema de telemedicina soberana ha alcanzado un nuevo rÃ©cord con 847 consultas en las Ãºltimas 24 horas...",time:"19 Feb",date:"19 Feb 2026 Â· 08:00",unread:false,tags:["soberano"],color:"linear-gradient(135deg, var(--red-alert), var(--wampum))",body:`<p>Reporte telemedicina â€” 19 Feb 2026</p><p><strong>Consultas (24h):</strong> 847 rÃ©cord Â· <strong>AI resueltas:</strong> 612 (72%) Â· <strong>Derivadas:</strong> 235 Â· <strong>Emergencias:</strong> 3 Â· <strong>Idiomas:</strong> 8</p><div class="signature"><strong>SoberanoDoctor AI Triage</strong><br><span style="font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--red-alert)">ğŸ©º 42 motores AI</span></div>`}
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// RENDER EMAIL LIST
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const tagLabels = {
  encrypted: { class: "tag-encrypted", label: "E2E" },
  bdet: { class: "tag-bdet", label: "BDET" },
  priority: { class: "tag-priority", label: "Urgente" },
  soberano: { class: "tag-soberano", label: "Soberano" },
  gov: { class: "tag-gov", label: "Gobierno" }
};

function renderEmailList() {
  const list = document.getElementById("emailList");
  list.innerHTML = emails.map((e, i) => `
    <div class="email-item ${e.unread ? 'unread' : ''} ${i === 0 ? 'active' : ''}" onclick="selectEmail(${e.id}, this)">
      ${e.unread ? '<div class="unread-dot"></div>' : ''}
      <div class="email-top">
        <span class="email-sender">${e.sender}</span>
        <span class="email-time">${e.time}</span>
      </div>
      <div class="email-subject">${e.subject}</div>
      <div class="email-preview">${e.preview}</div>
      <div class="email-tags">
        ${e.tags.map(t => `<span class="email-tag ${tagLabels[t].class}">${tagLabels[t].label}</span>`).join('')}
      </div>
    </div>
  `).join('');
}

function selectEmail(id, el) {
  const email = emails.find(e => e.id === id);
  if (!email) return;
  document.querySelectorAll('.email-item').forEach(item => item.classList.remove('active'));
  el.classList.add('active');
  el.classList.remove('unread');
  const dot = el.querySelector('.unread-dot');
  if (dot) dot.remove();
  document.getElementById('readerSubject').textContent = email.subject;
  document.getElementById('readerAvatar').textContent = email.initials;
  document.getElementById('readerAvatar').style.background = email.color;
  document.getElementById('readerName').textContent = email.sender;
  document.getElementById('readerEmail').textContent = email.email;
  document.getElementById('readerDate').textContent = email.date;
  document.getElementById('readerBody').innerHTML = email.body;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// UI INTERACTIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function openCompose() { document.getElementById('composeOverlay').classList.add('open'); }
function closeCompose() { document.getElementById('composeOverlay').classList.remove('open'); }

function setFolder(el, name) {
  document.querySelectorAll('.sidebar-item').forEach(i => i.classList.remove('active'));
  el.classList.add('active');
  document.querySelector('.list-header h2').textContent = name;
}

function approvePayment(btn) {
  btn.textContent = 'âœ“ Pago Aprobado';
  btn.style.background = 'var(--sent-green)';
  btn.disabled = true;
  showToast('Pago aprobado', 'â“Œ 2,500.00 enviado a MarÃ­a Canaima via BDET Bank');
}

function sendEmail() {
  closeCompose();
  showToast('Correo enviado', 'Tu correo ha sido enviado con cifrado cuÃ¡ntico E2E');
}

function showToast(title, msg) {
  const toast = document.getElementById('toast');
  if (title) toast.querySelector('.toast-title').textContent = title;
  if (msg) toast.querySelector('.toast-msg').textContent = msg;
  toast.classList.add('show');
  setTimeout(() => toast.classList.remove('show'), 4000);
}

// Init
renderEmailList();
</script>
<script src="../shared/ierahkwa-api.js"></script>
<script>
// Auto-connect to /api/messaging
window.PLATFORM_API = '/api/messaging';
if (!Ierahkwa.auth.isLoggedIn()) {
    console.log('[correo-soberano] Not logged in â€” showing login modal');
}
</script>
<script>
/* Offline Module â€” Correo Soberano v1.0.0 */
(function(){
  const DB_NAME='ierahkwa-correo-offline';const DB_VER=1;
  const STORES=['bandeja-entrada','borradores','contactos-correo','enviados-pendientes'];
  let db=null;

  function openDB(){
    return new Promise((resolve,reject)=>{
      const req=indexedDB.open(DB_NAME,DB_VER);
      req.onupgradeneeded=()=>{
        const d=req.result;
        STORES.forEach(s=>{if(!d.objectStoreNames.contains(s))d.createObjectStore(s,{keyPath:'id'})});
      };
      req.onsuccess=()=>{db=req.result;resolve(db)};
      req.onerror=()=>reject(req.error);
    });
  }

  async function cacheInbox(){
    if(!navigator.onLine)return;
    try{
      const res=await fetch('/api/culture/email/inbox?limit=100');
      if(!res.ok)return;const data=await res.json();
      const tx=db.transaction('bandeja-entrada','readwrite');
      data.forEach(e=>tx.objectStore('bandeja-entrada').put({...e,id:e.emailId,cached:Date.now()}));
      console.log(`[correo-offline] Cached ${data.length} emails`);
    }catch(e){console.warn('[correo-offline] Inbox cache failed:',e)}
  }

  async function cacheEmailContacts(){
    if(!navigator.onLine)return;
    try{
      const res=await fetch('/api/culture/email/contacts');
      if(!res.ok)return;const data=await res.json();
      const tx=db.transaction('contactos-correo','readwrite');
      data.forEach(c=>tx.objectStore('contactos-correo').put({...c,id:c.email,cached:Date.now()}));
    }catch(e){console.warn('[correo-offline] Contact cache failed:',e)}
  }

  async function saveDraft(draft){
    const tx=db.transaction('borradores','readwrite');
    tx.objectStore('borradores').put({id:draft.draftId||Date.now().toString(),...draft,modified:Date.now()});
  }

  async function queueEmail(emailData){
    const tx=db.transaction('enviados-pendientes','readwrite');
    tx.objectStore('enviados-pendientes').put({id:Date.now().toString(),...emailData,queued:Date.now(),synced:false});
    console.log('[correo-offline] Email queued for sending');
  }

  async function getInbox(){
    const tx=db.transaction('bandeja-entrada','readonly');
    return new Promise(r=>{tx.objectStore('bandeja-entrada').getAll().onsuccess=e=>r(e.target.result)});
  }

  async function getDrafts(){
    const tx=db.transaction('borradores','readonly');
    return new Promise(r=>{tx.objectStore('borradores').getAll().onsuccess=e=>r(e.target.result)});
  }

  async function syncEmails(){
    if(!navigator.onLine)return;
    const tx=db.transaction('enviados-pendientes','readonly');
    const all=await new Promise(r=>{tx.objectStore('enviados-pendientes').getAll().onsuccess=e=>r(e.target.result)});
    for(const e of all.filter(x=>!x.synced)){
      try{
        await fetch('/api/culture/email/send',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(e)});
        const tx2=db.transaction('enviados-pendientes','readwrite');
        tx2.objectStore('enviados-pendientes').put({...e,synced:true});
      }catch{break}
    }
  }

  function showOfflineBanner(show){
    let b=document.getElementById('offline-banner');
    if(!b){
      b=document.createElement('div');b.id='offline-banner';
      b.style.cssText='position:fixed;bottom:0;left:0;right:0;background:#607d8b;color:#fff;text-align:center;padding:8px;font-size:13px;font-weight:700;z-index:9999;transform:translateY(100%);transition:transform .3s';
      b.textContent='Modo Offline â€” Bandeja de entrada en cache. Correos nuevos se enviaran al reconectar.';
      document.body.appendChild(b);
    }
    b.style.transform=show?'translateY(0)':'translateY(100%)';
  }

  async function init(){
    await openDB();
    if(navigator.onLine){await cacheInbox();await cacheEmailContacts()}
    window.addEventListener('online',()=>{showOfflineBanner(false);syncEmails()});
    window.addEventListener('offline',()=>showOfflineBanner(true));
    if(!navigator.onLine)showOfflineBanner(true);
    console.log('[correo-offline] Initialized â€” inbox, drafts, contacts, send queue');
  }

  window.IerahkwaCorreoOffline={getInbox,getDrafts,saveDraft,send:queueEmail,sync:syncEmails};
  init();
})();
</script>
<script src="../shared/ierahkwa-security.js"></script>
<script src="../shared/ierahkwa-quantum.js"></script>
<script src="../shared/ierahkwa-protocols.js"></script>
<script src="../shared/ierahkwa-interconnect.js"></script>
<script>if("serviceWorker"in navigator){navigator.serviceWorker.register("../shared/sw.js").catch(function(){})}</script>
<script src="../shared/ierahkwa-agents.js"></script>
</body>
</html>
