<%- include('../partials/header') %>

<div class="container-fluid p-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2><i class="bi bi-people"></i> User Management</h2>
        <a href="/users/new" class="btn btn-primary"><i class="bi bi-plus-circle"></i> New User</a>
    </div>

    <div class="card">
        <div class="card-body">
            <table class="table table-hover">
                <thead class="table-light">
                    <tr>
                        <th>Username</th>
                        <th>Full Name</th>
                        <th>Email</th>
                        <th>Role</th>
                        <th>Last Login</th>
                        <th>Status</th>
                        <th class="text-center">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <% users.forEach(u => { %>
                    <tr class="<%= !u.is_active ? 'table-secondary' : '' %>">
                        <td><strong><%= u.username %></strong></td>
                        <td><%= u.full_name %></td>
                        <td><%= u.email || '-' %></td>
                        <td><span class="badge bg-<%= u.role === 'admin' ? 'danger' : u.role === 'manager' ? 'warning' : 'info' %>"><%= u.role %></span></td>
                        <td><small><%= u.last_login ? new Date(u.last_login).toLocaleString() : 'Never' %></small></td>
                        <td><span class="badge bg-<%= u.is_active ? 'success' : 'secondary' %>"><%= u.is_active ? 'Active' : 'Inactive' %></span></td>
                        <td class="text-center">
                            <a href="/users/<%= u.id %>/edit" class="btn btn-sm btn-outline-primary"><i class="bi bi-pencil"></i></a>
                            <a href="/users/<%= u.id %>/reset-password" class="btn btn-sm btn-outline-warning"><i class="bi bi-key"></i></a>
                        </td>
                    </tr>
                    <% }) %>
                </tbody>
            </table>
        </div>
    </div>
</div>

<%- include('../partials/footer') %>
