// Internationalization (i18n) Module for Smart POS System

const i18n = {
  currentLang: 'en',
  
  translations: {
    en: {
      app_name: 'Smart POS',
      nav_sale: 'Sale',
      nav_tables: 'Tables',
      nav_orders: 'Orders',
      nav_reports: 'Reports',
      nav_items: 'Items',
      nav_users: 'Users',
      current_order: 'Current Order',
      select_table: 'Select Table',
      cart_empty: 'No items in cart',
      subtotal: 'Subtotal',
      tax: 'Tax',
      discount: 'Discount',
      total: 'Total',
      clear: 'Clear',
      pay: 'Pay',
      all: 'All',
      search_items: 'Search items...',
      table_management: 'Table Management',
      add_table: 'Add Table',
      available: 'Available',
      occupied: 'Occupied',
      reserved: 'Reserved',
      cleaning: 'Cleaning',
      orders: 'Orders',
      reports: 'Reports',
      generate: 'Generate',
      items_management: 'Items Management',
      add_category: 'Add Category',
      add_item: 'Add Item',
      name: 'Name',
      category: 'Category',
      price: 'Price',
      tax_rate: 'Tax Rate',
      actions: 'Actions',
      users_management: 'Users Management',
      add_user: 'Add User',
      username: 'Username',
      full_name: 'Full Name',
      role: 'Role',
      status: 'Status',
      save: 'Save',
      cancel: 'Cancel',
      delete: 'Delete',
      edit: 'Edit',
      confirm: 'Confirm',
      payment: 'Payment',
      cash: 'Cash',
      card: 'Card',
      other: 'Other',
      complete_payment: 'Complete Payment',
      order_completed: 'Order Completed',
      print_receipt: 'Print Receipt',
      new_order: 'New Order',
      daily_summary: 'Daily Summary',
      total_orders: 'Total Orders',
      total_revenue: 'Total Revenue',
      avg_order: 'Avg. Order',
      top_items: 'Top Items',
      sales_by_hour: 'Sales by Hour',
      admin: 'Admin',
      cashier: 'Cashier',
      manager: 'Manager',
      active: 'Active',
      inactive: 'Inactive',
      password: 'Password',
      permissions: 'Permissions',
      language: 'Language',
      logout: 'Logout',
      login: 'Login',
      welcome: 'Welcome',
      table: 'Table',
      capacity: 'Capacity',
      floor: 'Floor',
      position: 'Position',
      shape: 'Shape',
      rectangle: 'Rectangle',
      circle: 'Circle',
      order_number: 'Order #',
      date: 'Date',
      time: 'Time',
      customer: 'Customer',
      notes: 'Notes',
      quantity: 'Quantity',
      unit_price: 'Unit Price',
      item_total: 'Item Total',
      payment_method: 'Payment Method',
      change: 'Change',
      amount_paid: 'Amount Paid',
      pending: 'Pending',
      completed: 'Completed',
      cancelled: 'Cancelled'
    },
    es: {
      app_name: 'Smart POS',
      nav_sale: 'Venta',
      nav_tables: 'Mesas',
      nav_orders: 'Pedidos',
      nav_reports: 'Reportes',
      nav_items: 'Productos',
      nav_users: 'Usuarios',
      current_order: 'Pedido Actual',
      select_table: 'Seleccionar Mesa',
      cart_empty: 'Carrito vacío',
      subtotal: 'Subtotal',
      tax: 'Impuesto',
      discount: 'Descuento',
      total: 'Total',
      clear: 'Limpiar',
      pay: 'Pagar',
      all: 'Todos',
      search_items: 'Buscar productos...',
      table_management: 'Gestión de Mesas',
      add_table: 'Agregar Mesa',
      available: 'Disponible',
      occupied: 'Ocupada',
      reserved: 'Reservada',
      cleaning: 'Limpieza',
      orders: 'Pedidos',
      reports: 'Reportes',
      generate: 'Generar',
      items_management: 'Gestión de Productos',
      add_category: 'Agregar Categoría',
      add_item: 'Agregar Producto',
      name: 'Nombre',
      category: 'Categoría',
      price: 'Precio',
      tax_rate: 'Tasa de Impuesto',
      actions: 'Acciones',
      users_management: 'Gestión de Usuarios',
      add_user: 'Agregar Usuario',
      username: 'Usuario',
      full_name: 'Nombre Completo',
      role: 'Rol',
      status: 'Estado',
      save: 'Guardar',
      cancel: 'Cancelar',
      delete: 'Eliminar',
      edit: 'Editar',
      confirm: 'Confirmar',
      payment: 'Pago',
      cash: 'Efectivo',
      card: 'Tarjeta',
      other: 'Otro',
      complete_payment: 'Completar Pago',
      order_completed: 'Pedido Completado',
      print_receipt: 'Imprimir Recibo',
      new_order: 'Nuevo Pedido',
      daily_summary: 'Resumen Diario',
      total_orders: 'Total Pedidos',
      total_revenue: 'Ingresos Totales',
      avg_order: 'Promedio',
      top_items: 'Más Vendidos',
      sales_by_hour: 'Ventas por Hora',
      admin: 'Administrador',
      cashier: 'Cajero',
      manager: 'Gerente',
      active: 'Activo',
      inactive: 'Inactivo',
      password: 'Contraseña',
      permissions: 'Permisos',
      language: 'Idioma',
      logout: 'Cerrar Sesión',
      login: 'Iniciar Sesión',
      welcome: 'Bienvenido',
      table: 'Mesa',
      capacity: 'Capacidad',
      floor: 'Piso',
      position: 'Posición',
      shape: 'Forma',
      rectangle: 'Rectángulo',
      circle: 'Círculo',
      order_number: 'Pedido #',
      date: 'Fecha',
      time: 'Hora',
      customer: 'Cliente',
      notes: 'Notas',
      quantity: 'Cantidad',
      unit_price: 'Precio Unitario',
      item_total: 'Total',
      payment_method: 'Método de Pago',
      change: 'Cambio',
      amount_paid: 'Monto Pagado',
      pending: 'Pendiente',
      completed: 'Completado',
      cancelled: 'Cancelado'
    },
    ar: {
      app_name: 'سمارت بوس',
      nav_sale: 'المبيعات',
      nav_tables: 'الطاولات',
      nav_orders: 'الطلبات',
      nav_reports: 'التقارير',
      nav_items: 'المنتجات',
      nav_users: 'المستخدمين',
      current_order: 'الطلب الحالي',
      select_table: 'اختر طاولة',
      cart_empty: 'السلة فارغة',
      subtotal: 'المجموع الفرعي',
      tax: 'الضريبة',
      discount: 'الخصم',
      total: 'المجموع',
      clear: 'مسح',
      pay: 'دفع',
      all: 'الكل',
      search_items: 'بحث عن منتج...',
      table_management: 'إدارة الطاولات',
      add_table: 'إضافة طاولة',
      available: 'متاح',
      occupied: 'مشغول',
      reserved: 'محجوز',
      cleaning: 'تنظيف',
      orders: 'الطلبات',
      reports: 'التقارير',
      generate: 'توليد',
      items_management: 'إدارة المنتجات',
      add_category: 'إضافة فئة',
      add_item: 'إضافة منتج',
      name: 'الاسم',
      category: 'الفئة',
      price: 'السعر',
      tax_rate: 'نسبة الضريبة',
      actions: 'الإجراءات',
      users_management: 'إدارة المستخدمين',
      add_user: 'إضافة مستخدم',
      username: 'اسم المستخدم',
      full_name: 'الاسم الكامل',
      role: 'الدور',
      status: 'الحالة',
      save: 'حفظ',
      cancel: 'إلغاء',
      delete: 'حذف',
      edit: 'تعديل',
      confirm: 'تأكيد',
      payment: 'الدفع',
      cash: 'نقدي',
      card: 'بطاقة',
      other: 'آخر',
      complete_payment: 'إتمام الدفع',
      order_completed: 'تم إتمام الطلب',
      print_receipt: 'طباعة الفاتورة',
      new_order: 'طلب جديد',
      daily_summary: 'الملخص اليومي',
      total_orders: 'إجمالي الطلبات',
      total_revenue: 'إجمالي الإيرادات',
      avg_order: 'متوسط الطلب',
      top_items: 'الأكثر مبيعاً',
      sales_by_hour: 'المبيعات بالساعة',
      admin: 'مدير',
      cashier: 'كاشير',
      manager: 'مشرف',
      active: 'نشط',
      inactive: 'غير نشط',
      password: 'كلمة المرور',
      permissions: 'الصلاحيات',
      language: 'اللغة',
      logout: 'تسجيل الخروج',
      login: 'تسجيل الدخول',
      welcome: 'مرحباً',
      table: 'طاولة',
      capacity: 'السعة',
      floor: 'الطابق',
      position: 'الموقع',
      shape: 'الشكل',
      rectangle: 'مستطيل',
      circle: 'دائري',
      order_number: 'رقم الطلب',
      date: 'التاريخ',
      time: 'الوقت',
      customer: 'العميل',
      notes: 'ملاحظات',
      quantity: 'الكمية',
      unit_price: 'سعر الوحدة',
      item_total: 'المجموع',
      payment_method: 'طريقة الدفع',
      change: 'الباقي',
      amount_paid: 'المبلغ المدفوع',
      pending: 'قيد الانتظار',
      completed: 'مكتمل',
      cancelled: 'ملغي'
    },
    fr: {
      app_name: 'Smart POS',
      nav_sale: 'Vente',
      nav_tables: 'Tables',
      nav_orders: 'Commandes',
      nav_reports: 'Rapports',
      nav_items: 'Articles',
      nav_users: 'Utilisateurs',
      current_order: 'Commande Actuelle',
      select_table: 'Sélectionner Table',
      cart_empty: 'Panier vide',
      subtotal: 'Sous-total',
      tax: 'Taxe',
      discount: 'Remise',
      total: 'Total',
      clear: 'Vider',
      pay: 'Payer',
      all: 'Tous',
      search_items: 'Rechercher...',
      table_management: 'Gestion des Tables',
      add_table: 'Ajouter Table',
      available: 'Disponible',
      occupied: 'Occupée',
      reserved: 'Réservée',
      cleaning: 'Nettoyage',
      orders: 'Commandes',
      reports: 'Rapports',
      generate: 'Générer',
      items_management: 'Gestion des Articles',
      add_category: 'Ajouter Catégorie',
      add_item: 'Ajouter Article',
      name: 'Nom',
      category: 'Catégorie',
      price: 'Prix',
      tax_rate: 'Taux de Taxe',
      actions: 'Actions',
      users_management: 'Gestion des Utilisateurs',
      add_user: 'Ajouter Utilisateur',
      username: 'Identifiant',
      full_name: 'Nom Complet',
      role: 'Rôle',
      status: 'Statut',
      save: 'Enregistrer',
      cancel: 'Annuler',
      delete: 'Supprimer',
      edit: 'Modifier',
      confirm: 'Confirmer',
      payment: 'Paiement',
      cash: 'Espèces',
      card: 'Carte',
      other: 'Autre',
      complete_payment: 'Finaliser le Paiement',
      order_completed: 'Commande Terminée',
      print_receipt: 'Imprimer Reçu',
      new_order: 'Nouvelle Commande',
      daily_summary: 'Résumé Quotidien',
      total_orders: 'Total Commandes',
      total_revenue: 'Revenu Total',
      avg_order: 'Moyenne',
      top_items: 'Meilleurs Ventes',
      sales_by_hour: 'Ventes par Heure',
      admin: 'Administrateur',
      cashier: 'Caissier',
      manager: 'Gérant',
      active: 'Actif',
      inactive: 'Inactif',
      password: 'Mot de passe',
      permissions: 'Permissions',
      language: 'Langue',
      logout: 'Déconnexion',
      login: 'Connexion',
      welcome: 'Bienvenue'
    }
  },

  // Set language
  setLanguage(lang) {
    if (!this.translations[lang]) {
      console.warn(`Language '${lang}' not supported, falling back to 'en'`);
      lang = 'en';
    }
    
    this.currentLang = lang;
    document.documentElement.lang = lang;
    document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
    
    // Update all translatable elements
    this.updatePageTranslations();
    
    // Save preference
    localStorage.setItem('pos_language', lang);
    
    return this;
  },

  // Get translation
  t(key) {
    const translation = this.translations[this.currentLang]?.[key] 
      || this.translations.en[key] 
      || key;
    return translation;
  },

  // Update all elements with data-i18n attribute
  updatePageTranslations() {
    document.querySelectorAll('[data-i18n]').forEach(el => {
      const key = el.getAttribute('data-i18n');
      el.textContent = this.t(key);
    });

    document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
      const key = el.getAttribute('data-i18n-placeholder');
      el.placeholder = this.t(key);
    });
  },

  // Initialize
  init() {
    const savedLang = localStorage.getItem('pos_language') || 'en';
    this.setLanguage(savedLang);
    return this;
  },

  // Get available languages
  getLanguages() {
    return [
      { code: 'en', name: 'English' },
      { code: 'es', name: 'Español' },
      { code: 'ar', name: 'العربية' },
      { code: 'fr', name: 'Français' }
    ];
  }
};

// Export
window.i18n = i18n;
